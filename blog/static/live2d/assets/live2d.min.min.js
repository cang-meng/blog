!function(S){function J(p){if(N[p])return N[p].exports;var e=N[p]={i:p,l:!1,exports:{}};return S[p].call(e.exports,e,e.exports,J),e.l=!0,e.exports}var N={};J.m=S;J.c=N;J.d=function(p,e,l){J.o(p,e)||Object.defineProperty(p,e,{configurable:!1,enumerable:!0,get:l})};J.n=function(p){var e=p&&p.__esModule?function(){return p["default"]}:function(){return p};return J.d(e,"a",e),e};J.o=function(p,e){return Object.prototype.hasOwnProperty.call(p,e)};J.p="";J(J.s=4)}([function(S,J,N){function p(){this.pose=this.physics=this.eyeBlink=this.modelMatrix=this.live2DModel=null;this.updating=this.initialized=this.debugMode=!1;this.alpha=1;this.accAlpha=0;this.lipSync=!1;this.dragY=this.dragX=this.accelZ=this.accelY=this.accelX=this.lipSyncValue=0;this.startTimeMSec=null;this.mainMotionManager=new h;this.expressionManager=new h;this.motions={};this.expressions={};this.isTexLoaded=!1}function e(){AMotion.prototype.constructor.call(this);this.paramList=[]}function l(){this.id="";this.type=-1;this.value=null}function ba(){this.stateStartTime=this.nextBlinkTime=null;this.eyeState=ha.STATE_FIRST;this.blinkIntervalMsec=4E3;this.closingMotionMsec=100;this.closedMotionMsec=50;this.openingMotionMsec=150;this.closeIfZero=!0;this.eyeID_L="PARAM_EYE_L_OPEN";this.eyeID_R="PARAM_EYE_R_OPEN"}function r(){this.tr=new Float32Array(16);this.identity()}function D(k,G){r.prototype.constructor.call(this);this.width=k;this.height=G}function h(){MotionQueueManager.prototype.constructor.call(this);this.reservePriority=this.currentPriority=null;this["super"]=MotionQueueManager.prototype}function d(){this.physicsList=[];this.startTimeMSec=UtSystem.getUserTimeMSec()}function H(){this.lastTime=0;this.lastModel=null;this.partsGroups=[]}function q(k){this.partsIndex=this.paramIndex=-1;this.link=null;this.id=k}function I(){this.EPSILON=.01;this.lastTimeSec=this.faceVY=this.faceVX=this.faceY=this.faceX=this.faceTargetY=this.faceTargetX=0}function A(){r.prototype.constructor.call(this);this.maxBottom=this.maxTop=this.maxRight=this.maxLeft=this.screenBottom=this.screenTop=this.screenRight=this.screenLeft=null;this.max=Number.MAX_VALUE;this.min=0}function F(){}var x=0;p.prototype.getModelMatrix=function(){return this.modelMatrix};p.prototype.setAlpha=function(k){.999<k&&(k=1);.001>k&&(k=0);this.alpha=k};p.prototype.getAlpha=function(){return this.alpha};p.prototype.isInitialized=function(){return this.initialized};p.prototype.setInitialized=function(k){this.initialized=k};p.prototype.isUpdating=function(){return this.updating};p.prototype.setUpdating=function(k){this.updating=k};p.prototype.getLive2DModel=function(){return this.live2DModel};p.prototype.setLipSync=function(k){this.lipSync=k};p.prototype.setLipSyncValue=function(k){this.lipSyncValue=k};p.prototype.setAccel=function(k,G,d){this.accelX=k;this.accelY=G;this.accelZ=d};p.prototype.setDrag=function(k,G){this.dragX=k;this.dragY=G};p.prototype.getMainMotionManager=function(){return this.mainMotionManager};p.prototype.getExpressionManager=function(){return this.expressionManager};p.prototype.loadModelData=function(k,G){var d=F.getPlatformManager();this.debugMode&&d.log("Load model : "+k);var e=this;d.loadLive2DModel(k,function(k){if(e.live2DModel=k,e.live2DModel.saveParam(),0!=Live2D.getError())return void console.error("Error : Failed to loadModelData().");e.modelMatrix=new D(e.live2DModel.getCanvasWidth(),e.live2DModel.getCanvasHeight());e.modelMatrix.setWidth(2);e.modelMatrix.setCenterPosition(0,0);G(e.live2DModel)})};p.prototype.loadTexture=function(k,G,d){x++;var e=F.getPlatformManager();this.debugMode&&e.log("Load Texture : "+G);var h=this;e.loadTexture(this.live2DModel,k,G,function(){x--;0==x&&(h.isTexLoaded=!0);"function"==typeof d&&d()})};p.prototype.loadMotion=function(k,G,d){var e=F.getPlatformManager();this.debugMode&&e.log("Load Motion : "+G);var h=null,l=this;e.loadBytes(G,function(G){h=Live2DMotion.loadMotion(G);null!=k&&(l.motions[k]=h);d(h)})};p.prototype.loadExpression=function(k,G,d){var h=F.getPlatformManager();this.debugMode&&h.log("Load Expression : "+G);var l=this;h.loadBytes(G,function(G){null!=k&&(l.expressions[k]=e.loadJson(G));"function"==typeof d&&d()})};p.prototype.loadPose=function(k,G){var d=F.getPlatformManager();this.debugMode&&d.log("Load Pose : "+k);var e=this;try{d.loadBytes(k,function(k){e.pose=H.load(k);"function"==typeof G&&G()})}catch(na){console.warn(na)}};p.prototype.loadPhysics=function(k){var G=F.getPlatformManager();this.debugMode&&G.log("Load Physics : "+k);var e=this;try{G.loadBytes(k,function(k){e.physics=d.load(k)})}catch(za){console.warn(za)}};p.prototype.hitTestSimple=function(k,G,d){if(null===this.live2DModel)return!1;k=this.live2DModel.getDrawDataIndex(k);if(0>k)return!1;var e=this.live2DModel.getTransformedPoints(k);k=this.live2DModel.getCanvasWidth();for(var h=0,l=this.live2DModel.getCanvasHeight(),p=0,q=0;q<e.length;q+=2){var ua=e[q],r=e[q+1];ua<k&&(k=ua);ua>h&&(h=ua);r<l&&(l=r);r>p&&(p=r)}G=this.modelMatrix.invertTransformX(G);d=this.modelMatrix.invertTransformY(d);return k<=G&&G<=h&&l<=d&&d<=p};p.prototype.hitTestSimpleCustom=function(k,G,d,e){return null!==this.live2DModel&&d>=k[0]&&d<=G[0]&&e<=k[1]&&e>=G[1]};e.prototype=new AMotion;e.EXPRESSION_DEFAULT="DEFAULT";e.TYPE_SET=0;e.TYPE_ADD=1;e.TYPE_MULT=2;e.loadJson=function(k){var d=new e;k=F.getPlatformManager().jsonParseFromBytes(k);if(d.setFadeIn(0<parseInt(k.fade_in)?parseInt(k.fade_in):1E3),d.setFadeOut(0<parseInt(k.fade_out)?parseInt(k.fade_out):1E3),null==k.params)return d;k=k.params;var h=k.length;d.paramList=[];for(var p=0;p<h;p++){var q=k[p],r=q.id.toString(),x=parseFloat(q.val),H;H=null!=q.calc?q.calc.toString():"add";(H="add"===H?e.TYPE_ADD:"mult"===H?e.TYPE_MULT:"set"===H?e.TYPE_SET:e.TYPE_ADD)==e.TYPE_ADD?(q=null==q.def?0:parseFloat(q.def),x-=q):H==e.TYPE_MULT&&(q=null==q.def?1:parseFloat(q.def),0==q&&(q=1),x/=q);q=new l;q.id=r;q.type=H;q.value=x;d.paramList.push(q)}return d};e.prototype.updateParamExe=function(k,d,h,l){for(d=this.paramList.length-1;0<=d;--d)l=this.paramList[d],l.type==e.TYPE_ADD?k.addToParamFloat(l.id,l.value,h):l.type==e.TYPE_MULT?k.multParamFloat(l.id,l.value,h):l.type==e.TYPE_SET&&k.setParamFloat(l.id,l.value,h)};ba.prototype.calcNextBlink=function(){return UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)};ba.prototype.setInterval=function(k){this.blinkIntervalMsec=k};ba.prototype.setEyeMotion=function(k,d,e){this.closingMotionMsec=k;this.closedMotionMsec=d;this.openingMotionMsec=e};ba.prototype.updateParam=function(k){var d;d=UtSystem.getUserTimeMSec();var e;switch(this.eyeState){case ha.STATE_CLOSING:e=(d-this.stateStartTime)/this.closingMotionMsec;1<=e&&(e=1,this.eyeState=ha.STATE_CLOSED,this.stateStartTime=d);d=1-e;break;case ha.STATE_CLOSED:e=(d-this.stateStartTime)/this.closedMotionMsec;1<=e&&(this.eyeState=ha.STATE_OPENING,this.stateStartTime=d);d=0;break;case ha.STATE_OPENING:e=(d-this.stateStartTime)/this.openingMotionMsec;1<=e&&(e=1,this.eyeState=ha.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink());d=e;break;case ha.STATE_INTERVAL:this.nextBlinkTime<d&&(this.eyeState=ha.STATE_CLOSING,this.stateStartTime=d);d=1;break;default:this.eyeState=ha.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),d=1}this.closeIfZero||(d=-d);k.setParamFloat(this.eyeID_L,d);k.setParamFloat(this.eyeID_R,d)};var ha=function(){};ha.STATE_FIRST="STATE_FIRST";ha.STATE_INTERVAL="STATE_INTERVAL";ha.STATE_CLOSING="STATE_CLOSING";ha.STATE_CLOSED="STATE_CLOSED";ha.STATE_OPENING="STATE_OPENING";r.mul=function(k,d,e){var h,l,G,q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(h=0;4>h;h++)for(l=0;4>l;l++)for(G=0;4>G;G++)q[h+4*l]+=k[h+4*G]*d[G+4*l];for(h=0;16>h;h++)e[h]=q[h]};r.prototype.identity=function(){for(var k=0;16>k;k++)this.tr[k]=0==k%5?1:0};r.prototype.getArray=function(){return this.tr};r.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)};r.prototype.setMatrix=function(k){if(null!=this.tr&&this.tr.length==this.tr.length)for(var d=0;16>d;d++)this.tr[d]=k[d]};r.prototype.getScaleX=function(){return this.tr[0]};r.prototype.getScaleY=function(){return this.tr[5]};r.prototype.transformX=function(k){return this.tr[0]*k+this.tr[12]};r.prototype.transformY=function(k){return this.tr[5]*k+this.tr[13]};r.prototype.invertTransformX=function(k){return(k-this.tr[12])/this.tr[0]};r.prototype.invertTransformY=function(k){return(k-this.tr[13])/this.tr[5]};r.prototype.multTranslate=function(k,d){r.mul([1,0,0,0,0,1,0,0,0,0,1,0,k,d,0,1],this.tr,this.tr)};r.prototype.translate=function(k,d){this.tr[12]=k;this.tr[13]=d};r.prototype.translateX=function(k){this.tr[12]=k};r.prototype.translateY=function(k){this.tr[13]=k};r.prototype.multScale=function(k,d){r.mul([k,0,0,0,0,d,0,0,0,0,1,0,0,0,0,1],this.tr,this.tr)};r.prototype.scale=function(k,d){this.tr[0]=k;this.tr[5]=d};D.prototype=new r;D.prototype.setPosition=function(k,d){this.translate(k,d)};D.prototype.setCenterPosition=function(k,d){var e=this.width*this.getScaleX(),h=this.height*this.getScaleY();this.translate(k-e/2,d-h/2)};D.prototype.top=function(k){this.setY(k)};D.prototype.bottom=function(k){var d=this.height*this.getScaleY();this.translateY(k-d)};D.prototype.left=function(k){this.setX(k)};D.prototype.right=function(k){var d=this.width*this.getScaleX();this.translateX(k-d)};D.prototype.centerX=function(k){var d=this.width*this.getScaleX();this.translateX(k-d/2)};D.prototype.centerY=function(k){var d=this.height*this.getScaleY();this.translateY(k-d/2)};D.prototype.setX=function(k){this.translateX(k)};D.prototype.setY=function(k){this.translateY(k)};D.prototype.setHeight=function(k){k/=this.height;this.scale(k,-k)};D.prototype.setWidth=function(k){k/=this.width;this.scale(k,-k)};h.prototype=new MotionQueueManager;h.prototype.getCurrentPriority=function(){return this.currentPriority};h.prototype.getReservePriority=function(){return this.reservePriority};h.prototype.reserveMotion=function(k){return!(this.reservePriority>=k)&&!(this.currentPriority>=k)&&(this.reservePriority=k,!0)};h.prototype.setReservePriority=function(k){this.reservePriority=k};h.prototype.updateParam=function(k){k=MotionQueueManager.prototype.updateParam.call(this,k);return this.isFinished()&&(this.currentPriority=0),k};h.prototype.startMotionPrio=function(k,d){return d==this.reservePriority&&(this.reservePriority=0),this.currentPriority=d,this.startMotion(k,!1)};d.load=function(k){var e=new d;k=F.getPlatformManager().jsonParseFromBytes(k).physics_hair;for(var h=k.length,l=0;l<h;l++){var q=k[l],p=new PhysicsHair,r=q.setup,x=parseFloat(r.length),H=parseFloat(r.regist),r=parseFloat(r.mass);p.setup(x,H,r);for(var A=q.src,wa=A.length,x=0;x<wa;x++){var C=A[x],H=C.id,r=PhysicsHair.Src.SRC_TO_X,B=C.ptype;"x"===B?r=PhysicsHair.Src.SRC_TO_X:"y"===B?r=PhysicsHair.Src.SRC_TO_Y:"angle"===B?r=PhysicsHair.Src.SRC_TO_G_ANGLE:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");B=parseFloat(C.scale);C=parseFloat(C.weight);p.addSrcParam(r,H,B,C)}q=q.targets;A=q.length;for(x=0;x<A;x++)wa=q[x],H=wa.id,r=PhysicsHair.Target.TARGET_FROM_ANGLE,B=wa.ptype,"angle"===B?r=PhysicsHair.Target.TARGET_FROM_ANGLE:"angle_v"===B?r=PhysicsHair.Target.TARGET_FROM_ANGLE_V:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target"),B=parseFloat(wa.scale),C=parseFloat(wa.weight),p.addTargetParam(r,H,B,C);e.physicsList.push(p)}return e};d.prototype.updateParam=function(k){for(var d=UtSystem.getUserTimeMSec()-this.startTimeMSec,e=0;e<this.physicsList.length;e++)this.physicsList[e].update(k,d)};H.load=function(k){var d=new H;k=F.getPlatformManager().jsonParseFromBytes(k).parts_visible;for(var e=k.length,h=0;h<e;h++){for(var l=k[h].group,p=l.length,r=[],x=0;x<p;x++){var A=l[x],D=new q(A.id);if(r[x]=D,null!=A.link){var A=A.link,wa=A.length;D.link=[];for(var C=0;C<wa;C++){var B=new q(A[C]);D.link.push(B)}}}d.partsGroups.push(r)}return d};H.prototype.updateParam=function(k){if(null!=k){k!=this.lastModel&&this.initParam(k);this.lastModel=k;var d=UtSystem.getUserTimeMSec(),e=0==this.lastTime?0:(d-this.lastTime)/1E3;this.lastTime=d;0>e&&(e=0);for(d=0;d<this.partsGroups.length;d++)this.normalizePartsOpacityGroup(k,this.partsGroups[d],e),this.copyOpacityOtherParts(k,this.partsGroups[d])}};H.prototype.initParam=function(d){if(null!=d)for(var k=0;k<this.partsGroups.length;k++)for(var e=this.partsGroups[k],h=0;h<e.length;h++){e[h].initIndex(d);var l=e[h].partsIndex,q=e[h].paramIndex;if(!(0>l)){var p=0!=d.getParamFloat(q);if(d.setPartsOpacity(l,p?1:0),d.setParamFloat(q,p?1:0),null!=e[h].link)for(l=0;l<e[h].link.length;l++)e[h].link[l].initIndex(d)}}};H.prototype.normalizePartsOpacityGroup=function(d,e,h){for(var k=-1,l=1,q=0;q<e.length;q++){var p=e[q].partsIndex,r=e[q].paramIndex;if(!(0>p)&&0!=d.getParamFloat(r)){if(0<=k)break;k=q;l=d.getPartsOpacity(p);l+=h/.5;1<l&&(l=1)}}0>k&&(k=0,l=1);for(q=0;q<e.length;q++)p=e[q].partsIndex,0>p||(k==q?d.setPartsOpacity(p,l):(r=d.getPartsOpacity(p),h=.5>l?-.5*l/.5+1:.5*(1-l)/.5,.15<(1-h)*(1-l)&&(h=1-.15/(1-l)),r>h&&(r=h),d.setPartsOpacity(p,r)))};H.prototype.copyOpacityOtherParts=function(d,e){for(var k=0;k<e.length;k++){var h=e[k];if(null!=h.link&&!(0>h.partsIndex))for(var l=d.getPartsOpacity(h.partsIndex),q=0;q<h.link.length;q++){var p=h.link[q];0>p.partsIndex||d.setPartsOpacity(p.partsIndex,l)}}};q.prototype.initIndex=function(d){this.paramIndex=d.getParamIndex("VISIBLE:"+this.id);this.partsIndex=d.getPartsDataIndex(PartsDataID.getID(this.id));d.setParamFloat(this.paramIndex,1)};I.FRAME_RATE=30;I.prototype.setPoint=function(d,e){this.faceTargetX=d;this.faceTargetY=e};I.prototype.getX=function(){return this.faceX};I.prototype.getY=function(){return this.faceY};I.prototype.update=function(){var d=40/7.5/I.FRAME_RATE;if(0==this.lastTimeSec)return void(this.lastTimeSec=UtSystem.getUserTimeMSec());var e=UtSystem.getUserTimeMSec(),h=(e-this.lastTimeSec)*I.FRAME_RATE/1E3;this.lastTimeSec=e;var e=h*d/(.15*I.FRAME_RATE),l=this.faceTargetX-this.faceX,q=this.faceTargetY-this.faceY;Math.abs(l)<=this.EPSILON&&Math.abs(q)<=this.EPSILON||(h=Math.sqrt(l*l+q*q),l=d*l/h-this.faceVX,d=d*q/h-this.faceVY,q=Math.sqrt(l*l+d*d),(q<-e||q>e)&&(l*=e/q,d*=e/q),this.faceVX+=l,this.faceVY+=d,d=.5*(Math.sqrt(e*e+16*e*h-8*e*h)-e),e=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY),e>d&&(this.faceVX*=d/e,this.faceVY*=d/e),this.faceX+=this.faceVX,this.faceY+=this.faceVY)};A.prototype=new r;A.prototype.getMaxScale=function(){return this.max};A.prototype.getMinScale=function(){return this.min};A.prototype.setMaxScale=function(d){this.max=d};A.prototype.setMinScale=function(d){this.min=d};A.prototype.isMaxScale=function(){return this.getScaleX()==this.max};A.prototype.isMinScale=function(){return this.getScaleX()==this.min};A.prototype.adjustTranslate=function(d,e){this.tr[0]*this.maxLeft+(this.tr[12]+d)>this.screenLeft&&(d=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]);this.tr[0]*this.maxRight+(this.tr[12]+d)<this.screenRight&&(d=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]);this.tr[5]*this.maxTop+(this.tr[13]+e)<this.screenTop&&(e=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]);this.tr[5]*this.maxBottom+(this.tr[13]+e)>this.screenBottom&&(e=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);r.mul([1,0,0,0,0,1,0,0,0,0,1,0,d,e,0,1],this.tr,this.tr)};A.prototype.adjustScale=function(d,e,h){var k=h*this.tr[0];k<this.min?0<this.tr[0]&&(h=this.min/this.tr[0]):k>this.max&&0<this.tr[0]&&(h=this.max/this.tr[0]);k=[1,0,0,0,0,1,0,0,0,0,1,0,d,e,0,1];h=[h,0,0,0,0,h,0,0,0,0,1,0,0,0,0,1];r.mul([1,0,0,0,0,1,0,0,0,0,1,0,-d,-e,0,1],this.tr,this.tr);r.mul(h,this.tr,this.tr);r.mul(k,this.tr,this.tr)};A.prototype.setScreenRect=function(d,e,h,l){this.screenLeft=d;this.screenRight=e;this.screenTop=l;this.screenBottom=h};A.prototype.setMaxScreenRect=function(d,e,h,l){this.maxLeft=d;this.maxRight=e;this.maxTop=l;this.maxBottom=h};A.prototype.getScreenLeft=function(){return this.screenLeft};A.prototype.getScreenRight=function(){return this.screenRight};A.prototype.getScreenBottom=function(){return this.screenBottom};A.prototype.getScreenTop=function(){return this.screenTop};A.prototype.getMaxLeft=function(){return this.maxLeft};A.prototype.getMaxRight=function(){return this.maxRight};A.prototype.getMaxBottom=function(){return this.maxBottom};A.prototype.getMaxTop=function(){return this.maxTop};F.platformManager=null;F.getPlatformManager=function(){return F.platformManager};F.setPlatformManager=function(d){F.platformManager=d};S.exports={L2DTargetPoint:I,Live2DFramework:F,L2DViewMatrix:A,L2DPose:H,L2DPartsParam:q,L2DPhysics:d,L2DMotionManager:h,L2DModelMatrix:D,L2DMatrix44:r,EYE_STATE:ha,L2DEyeBlink:ba,L2DExpressionParam:l,L2DExpressionMotion:e,L2DBaseModel:p}},function(S,J,N){S.exports={DEBUG_LOG:!1,DEBUG_MOUSE_LOG:!1,DEBUG_DRAW_HIT_AREA:!1,DEBUG_DRAW_ALPHA_MODEL:!1,VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_SLEEPY:2,PRIORITY_NORMAL:3,PRIORITY_FORCE:4,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_SLEEPY:"sleepy",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"}},function(S,J,N){Object.defineProperty(J,"__esModule",{value:!0});J.setContext=function(e){p=e};J.getContext=function(){return p};var p=void 0},function(S,J,N){function p(){}p.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.depth=0;p.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.tmp=Array(16);p.reset=function(){this.depth=0};p.loadIdentity=function(){for(var e=0;16>e;e++)this.currentMatrix[e]=0==e%5?1:0};p.push=function(){var e=(this.depth,16*(this.depth+1));this.matrixStack.length<e+16&&(this.matrixStack.length=e+16);for(var l=0;16>l;l++)this.matrixStack[e+l]=this.currentMatrix[l];this.depth++};p.pop=function(){0>--this.depth&&(myError("Invalid matrix stack."),this.depth=0);for(var e=16*this.depth,l=0;16>l;l++)this.currentMatrix[l]=this.matrixStack[e+l]};p.getMatrix=function(){return this.currentMatrix};p.multMatrix=function(e){var l,p,r;for(l=0;16>l;l++)this.tmp[l]=0;for(l=0;4>l;l++)for(p=0;4>p;p++)for(r=0;4>r;r++)this.tmp[l+4*p]+=this.currentMatrix[l+4*r]*e[r+4*p];for(l=0;16>l;l++)this.currentMatrix[l]=this.tmp[l]};S.exports=p},function(S,J,N){S.exports=N(5)},function(S,J,N){function p(d){return d&&d.__esModule?d:{"default":d}}function e(){G||(G=!0,function C(){a:{x["default"].reset();x["default"].loadIdentity();na.update();k.setDrag(na.getX(),na.getY());ua.clear(ua.COLOR_BUFFER_BIT);x["default"].multMatrix(va.getArray());x["default"].multMatrix(ea.getArray());x["default"].push();for(var d=0;d<k.numModels();d++){var e=k.getModel(d);if(null==e)break a;e.initialized&&!e.updating&&(e.update(),e.draw(ua))}x["default"].pop()}d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.Live2D.captureFrame&&(window.Live2D.captureFrame=!1,e=document.createElement("a"),document.body.appendChild(e),e.setAttribute("type","hidden"),e.href=za.toDataURL(),e.download=window.Live2D.captureName||"live2d.png",e.click());d(C,za)}())}function l(d,e){return d.x*e.x+d.y*e.y}function ba(d,e){var h=Math.sqrt(d*d+e*e);return{x:d/h,y:e/h}}function r(d,e,h){function k(d,e){return 180*Math.acos(l({x:0,y:1},ba(d,e)))/Math.PI}if(e.x<h.left+h.width&&e.y<h.top+h.height&&e.x>h.left&&e.y>h.top)return e;var q=d.x-e.x,p=d.y-e.y,r=k(q,p);e.x<d.x&&(r=360-r);e=360-k(h.left-d.x,-1*(h.top-d.y));var x=360-k(h.left-d.x,-1*(h.top+h.height-d.y)),B=k(h.left+h.width-d.x,-1*(h.top-d.y)),C=k(h.left+h.width-d.x,-1*(h.top+h.height-d.y)),q=p/q,p={};r<B?(h=h.top-d.y,p={y:d.y+h,x:d.x+h/q}):r<C?(h=h.left+h.width-d.x,p={y:d.y+h*q,x:d.x+h}):r<x?(h=h.top+h.height-d.y,p={y:d.y+h,x:d.x+h/q}):r<e?(h=d.x-h.left,p={y:d.y-h*q,x:d.x-h}):(h=h.top-d.y,p={y:d.y+h,x:d.x+h/q});return p}function D(d){E=!0;var e=za.getBoundingClientRect();pa.transformX(d.clientX-e.left);pa.transformY(d.clientY-e.top);var h=r({x:e.left+e.width/2,y:e.top+e.height*P},{x:d.clientX,y:d.clientY},e),k=q(h.x-e.left),e=I(h.y-e.top);F["default"].DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+d.clientX+" y:"+d.clientY+" ) view( x:"+k+" y:"+e+")");na.setPoint(k,e)}function h(){F["default"].DEBUG_LOG&&console.log("Set Session Storage.");sessionStorage.setItem("Sleepy","1")}function d(d){if("mousewheel"!=d.type)if("mousedown"==d.type){E=!0;var e=za.getBoundingClientRect();pa.transformX(d.clientX-e.left);pa.transformY(d.clientY-e.top);var l=r({x:e.left+e.width/2,y:e.top+e.height*P},{x:d.clientX,y:d.clientY},e),p=q(l.x-e.left),e=I(l.y-e.top);F["default"].DEBUG_MOUSE_LOG&&console.log("onMouseDown device( x:"+d.clientX+" y:"+d.clientY+" ) view( x:"+p+" y:"+e+")");k.tapEvent(p,e)}else"mousemove"==d.type?("1"===sessionStorage.getItem("Sleepy")&&sessionStorage.setItem("Sleepy","0"),D(d)):"mouseup"!=d.type&&"mouseout"==d.type&&(F["default"].DEBUG_LOG&&console.log("Mouse out Window."),E&&(E=!1),na.setPoint(0,0),d=sessionStorage.getItem("SleepyTimer"),window.clearTimeout(d),d=window.setTimeout(h,5E4),sessionStorage.setItem("SleepyTimer",d))}function H(d){var e=d.touches[0];if("touchstart"==d.type)1==d.touches.length&&D(e);else if("touchmove"==d.type){var h=za.getBoundingClientRect();pa.transformX(e.clientX-h.left);pa.transformY(e.clientY-h.top);var k=r({x:h.left+h.width/2,y:h.top+h.height*P},{x:e.clientX,y:e.clientY},h);d=q(k.x-h.left);h=I(k.y-h.top);F["default"].DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+e.clientX+" y:"+e.clientY+" ) view( x:"+d+" y:"+h+")");E&&na.setPoint(d,h)}else"touchend"==d.type&&(E&&(E=!1),na.setPoint(0,0))}function q(d){d=pa.transformX(d);return ea.invertTransformX(d)}function I(d){d=pa.transformY(d);return ea.invertTransformY(d)}N(6);var A=N(0);S=N(8);S=p(S);J=N(1);var F=p(J);J=N(3);var x=p(J),ha=N(2),k=(window.navigator.platform.toLowerCase(),new S["default"]),G=!1,ua=null,za=null,na=null,ea=null,va=null,pa=null,E=!1,P=.5;window.loadlive2d=function(h,l,q){P=void 0===q?.5:q;za=document.getElementById(h);za.addEventListener&&(window.addEventListener("click",d),window.addEventListener("mousedown",d),window.addEventListener("mousemove",d),window.addEventListener("mouseup",d),document.addEventListener("mouseout",d),window.addEventListener("touchstart",H),window.addEventListener("touchend",H),window.addEventListener("touchmove",H));h=za.width;q=za.height;na=new A.L2DTargetPoint;var p=q/h,r=F["default"].VIEW_LOGICAL_LEFT,x=F["default"].VIEW_LOGICAL_RIGHT,D=-p;window.Live2D.captureFrame=!1;ea=new A.L2DViewMatrix;ea.setScreenRect(r,x,D,p);ea.setMaxScreenRect(F["default"].VIEW_LOGICAL_MAX_LEFT,F["default"].VIEW_LOGICAL_MAX_RIGHT,F["default"].VIEW_LOGICAL_MAX_BOTTOM,F["default"].VIEW_LOGICAL_MAX_TOP);ea.setMaxScale(F["default"].VIEW_MAX_SCALE);ea.setMinScale(F["default"].VIEW_MIN_SCALE);va=new A.L2DMatrix44;va.multScale(1,h/q);pa=new A.L2DMatrix44;pa.multTranslate(-h/2,-q/2);pa.multScale(2/h,-2/h);var B;b:{h=["webgl","experimental-webgl","webkit-3d","moz-webgl"];for(q=0;q<h.length;q++)try{var z=za.getContext(h[q],{premultipliedAlpha:!0});if(z){B=z;break b}}catch(ga){}B=null}(ua=B,(0,ha.setContext)(ua),ua)?(window.Live2D.setGL(ua),ua.clearColor(0,0,0,0),k.reloadFlg=!0,k.count++,k.changeModel(ua,l),e()):(console.error("Failed to create WebGL context."),window.WebGLRenderingContext&&console.error("Your browser don't support WebGL, check https://get.webgl.org/ for futher information."))}},function(S,J,N){(function(p){!function(){function e(){y||(this._$MT=null,this._$5S=null,this._$NP=0,e._$42++,this._$5S=new w(this))}function l(a){if(!y)for(this.clipContextList=[],this.glcontext=a.gl,this.dp_webgl=a,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new ea,u.glContext.length>u.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new qa,this.tmpMatrix2=new qa,this.tmpMatrixForMask=new qa,this.tmpMatrixForDraw=new qa,this.CHANNEL_COLORS=[],new wa,a=new wa,a.r=0,a.g=0,a.b=0,a.a=1,this.CHANNEL_COLORS.push(a),a=new wa,a.r=1,a.g=0,a.b=0,a.a=0,this.CHANNEL_COLORS.push(a),a=new wa,a.r=0,a.g=1,a.b=0,a.a=0,this.CHANNEL_COLORS.push(a),a=new wa,a.r=0,a.g=0,a.b=1,a.a=0,this.CHANNEL_COLORS.push(a),a=0;a<this.CHANNEL_COLORS.length;a++)this.dp_webgl.setChannelFlagAsColor(a,this.CHANNEL_COLORS[a])}function ba(a,b,c){this.clipIDList=c;this.clippingMaskDrawIndexList=[];for(var g=0;g<c.length;g++)this.clippingMaskDrawIndexList.push(b.getDrawDataIndex(c[g]));this.clippedDrawContextList=[];this.isUsing=!0;this.layoutChannelNo=0;this.layoutBounds=new ea;this.allClippedDrawRect=new ea;this.matrixForMask=new Float32Array(16);this.matrixForDraw=new Float32Array(16);this.owner=a}function r(a,b){this._$gP=a;this.drawDataIndex=b}function D(){y||(this.color=null)}function h(){y||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1E3,this._$eo=1E3,this._$V0=1,this._$a0())}function d(){}function H(){this._$0S=this._$r=null}function q(){y||(this.x=null,this.y=null,this.width=null,this.height=null)}function I(a){y||Da.prototype.constructor.call(this,a)}function A(a){y||Da.prototype.constructor.call(this,a)}function F(){y||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,F._$42++)}function x(){y||(this.p1=new J,this.p2=new J,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=[],this._$qP=[],this.setup(.3,.5,.1))}function J(){this._$p=1;this._$HL=this._$7L=this._$70=this._$s0=this.fy=this.fx=this.ay=this.ax=this.vy=this.vx=this.y=this.x=0}function k(a,b,c){this._$V0=this.scale=this._$wL=null;this._$wL=a;this.scale=b;this._$V0=c}function G(a,b,c,g){k.prototype.constructor.call(this,b,c,g);this._$tL=a}function N(a,b,c){this._$V0=this.scale=this._$wL=null;this._$wL=a;this.scale=b;this._$V0=c}function S(a,b,c,g){N.prototype.constructor.call(this,b,c,g);this._$YP=a}function na(){y||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}function ea(){y||(this.x=null,this.y=null,this.width=null,this.height=null)}function va(){}function pa(){y||(this.x=null,this.y=null)}function E(){y||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=[])}function P(){y||(this._$Eb=P._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=P.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=[])}function wa(){y||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=u.L2D_COLOR_BLEND_MODE_MULT)}function C(){y||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function B(){}function ia(){y||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=ia._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function T(){}function xa(){y||(this._$Ob=null)}function qa(){this.m=new Float32Array(16);this.identity()}function sa(a){y||Da.prototype.constructor.call(this,a)}function z(){y||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function ga(){y||(h.prototype.constructor.call(this),this.motions=[],this._$7r=null,this._$7r=ga._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function Fa(){this._$P=new Float32Array(100);this.size=0}function O(){this._$RP=this._$I0=this._$4P=null}function Q(){}function Z(){}function w(a){y||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=Array(w._$is),this._$_2=new Float32Array(w._$is),this._$vr=new Float32Array(w._$is),this._$Rr=new Float32Array(w._$is),this._$Or=new Float32Array(w._$is),this._$fs=new Float32Array(w._$is),this._$Js=Array(w._$is),this._$3S=[],this._$aS=[],this._$Bo=null,this._$F2=[],this._$db=[],this._$8b=[],this._$Hr=[],this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(Q._$Qb),this._$ZP=new Float32Array(2*Q._$1r),this._$Ri=a,this._$b0=w._$HP++,this.clipManager=null,this.dp_webgl=null)}function La(){}function Oa(){y||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=Ba.STATE_FIRST,this._$Br=4E3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}function U(){y||(P.prototype.constructor.call(this),this._$sb=new Int32Array(U._$As),this._$U2=[],this.transform=null,this.gl=null,null==U._$NT&&(U._$NT=U._$9r(256),U._$vS=U._$9r(256),U._$no=U._$vb(256)))}function ca(){y||(C.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function Va(a){oa.prototype.constructor.call(this,a);this._$8r=C._$ur;this._$Wr=this._$Yr=null}function L(){y||(E.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function Ga(){y||(this._$NL=null,this._$3S=null,this._$aS=null,Ga._$42++)}function ma(){y||(e.prototype.constructor.call(this),this._$zo=new U)}function W(){y||(h.prototype.constructor.call(this),this.motions=[],this._$o2=null,this._$7r=W._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function Aa(a,b){return String.fromCharCode(a.getUint8(b))}function Fa(){this._$P=new Float32Array(100);this.size=0}function O(){this._$RP=this._$I0=this._$4P=null}function ta(){y||(C.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function Wa(a){oa.prototype.constructor.call(this,a);this._$8r=C._$ur;this._$hr=this._$Cr=null}function ka(){y||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,ka._$42++)}function Pa(a){this._$VS=null;this._$e0=a}function Da(a){y||(this.id=a)}function Ha(){y||(this._$4S=null)}function fa(a,b){this.canvas=a;this.context=b;this.viewport=[0,0,a.width,a.height];this._$6r=1;this._$xP=0;this._$3r=1;this._$uP=0;this._$Qo=-1;this.cacheImages={}}function Ia(){y||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function oa(a){y||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=a,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function u(){}function Ra(){}function Ca(a){y||(this._$ib=a)}function R(){y||(L.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=R._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=R._$42++)}function Qa(a){Ma.prototype.constructor.call(this,a);this._$8r=L._$ur;this._$hr=this._$Cr=null}function Sa(){y||(this.x=null,this.y=null)}function Y(a){y||(e.prototype.constructor.call(this),this.drawParamWebGL=new X(a),this.drawParamWebGL.setGL(u.getGL(a)))}function Ea(){y||(this.motions=null,this._$eb=!1,this.motions=[])}function Ja(){this._$w0=null;this._$AT=!0;this._$9L=!1;this._$Do=this._$bs=this._$z2=-1;this._$sr=Ja._$Gs++}function ra(){this.m=[1,0,0,0,1,0,0,0,1]}function aa(a){y||Da.prototype.constructor.call(this,a)}function X(a){y||(P.prototype.constructor.call(this),this.textures=[],this.transform=null,this.gl=null,this.glno=a,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function Ka(a,b,c){return null==b&&(b=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),b}function Ta(a,b,c){return null==b&&(b=a.createBuffer()),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b),a.bufferData(a.ELEMENT_ARRAY_BUFFER,c,a.DYNAMIC_DRAW),b}function ja(a){y||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1E3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=[],this._$T=a,this._$F=0)}function da(){}function Ma(a){y||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=a)}function V(){}var y=!0;e._$0s=1;e._$4s=2;e._$42=0;e._$62=function(a,b){try{if(b instanceof ArrayBuffer&&(b=new DataView(b)),!(b instanceof DataView))throw new Ca("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var c,g=new ja(b),f=g._$ST(),v=g._$ST(),K=g._$ST();if(109!=f||111!=v||99!=K)throw new Ca("_$gi _$C _$li , _$Q0 _$P0.");if(c=g._$ST(),g._$gr(c),c>Z._$T7)throw a._$NP|=e._$4s,new Ca("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+Z._$T7+" \x3c _$f0 : "+c+" )@_$SS#loadModel()\n");var n=g._$nP();if(c>=Z._$s7){var t=g._$9T(),h=g._$9T();if(-30584!=t||-30584!=h)throw a._$NP|=e._$0s,new Ca("_$gi _$C _$li , _$0 _$6 _$Ui.");}a._$KS(n);var Xa=a.getModelContext();Xa.setDrawParam(a.getDrawParam());Xa.init()}catch(Za){d._$Rb(Za)}};e.prototype._$KS=function(a){this._$MT=a};e.prototype.getModelImpl=function(){return null==this._$MT&&(this._$MT=new F,this._$MT._$zP()),this._$MT};e.prototype.getCanvasWidth=function(){return null==this._$MT?0:this._$MT.getCanvasWidth()};e.prototype.getCanvasHeight=function(){return null==this._$MT?0:this._$MT.getCanvasHeight()};e.prototype.getParamFloat=function(a){return"number"!=typeof a&&(a=this._$5S.getParamIndex(A.getID(a))),this._$5S.getParamFloat(a)};e.prototype.setParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(A.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)*(1-c)+b*c)};e.prototype.addToParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(A.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)+b*c)};e.prototype.multParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(A.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)*(1+(b-1)*c))};e.prototype.getParamIndex=function(a){return this._$5S.getParamIndex(A.getID(a))};e.prototype.loadParam=function(){this._$5S.loadParam()};e.prototype.saveParam=function(){this._$5S.saveParam()};e.prototype.init=function(){this._$5S.init()};e.prototype.update=function(){this._$5S.update()};e.prototype._$Rs=function(){return d._$li("_$60 _$PT _$Rs()"),-1};e.prototype._$Ds=function(a){d._$li("_$60 _$PT _$SS#_$Ds() \n")};e.prototype._$K2=function(){};e.prototype.draw=function(){};e.prototype.getModelContext=function(){return this._$5S};e.prototype._$s2=function(){return this._$NP};e.prototype._$P7=function(a,b,c,g){var f=-1,v=0;if(0!=c)if(1==a.length){var d=a[0];a=0!=this.getParamFloat(d);var n=b[0];b=this.getPartsOpacity(n);c/=g;a?1<(b+=c)&&(b=1):0>(b-=c)&&(b=0);this.setPartsOpacity(n,b)}else{for(var t=0;t<a.length;t++)if(d=a[t],d=0!=this.getParamFloat(d)){if(0<=f)break;f=t;n=b[t];v=this.getPartsOpacity(n);v+=c/g;1<v&&(v=1)}0>f&&(console.log("No _$wi _$q0/ _$U default[%s]",a[0]),f=0,v=1,this.loadParam(),this.setParamFloat(a[f],v),this.saveParam());for(t=0;t<a.length;t++)n=b[t],f==t?this.setPartsOpacity(n,v):(g=this.getPartsOpacity(n),c=.5>v?-.5*v/.5+1:.5*(1-v)/.5,.15<(1-c)*(1-v)&&(c=1-.15/(1-v)),g>c&&(g=c),this.setPartsOpacity(n,g))}else for(t=0;t<a.length;t++)d=a[t],n=b[t],d=0!=this.getParamFloat(d),this.setPartsOpacity(n,d?1:0)};e.prototype.setPartsOpacity=function(a,b){"number"!=typeof a&&(a=this._$5S.getPartsDataIndex(I.getID(a)));this._$5S.setPartsOpacity(a,b)};e.prototype.getPartsDataIndex=function(a){return a instanceof I||(a=I.getID(a)),this._$5S.getPartsDataIndex(a)};e.prototype.getPartsOpacity=function(a){return"number"!=typeof a&&(a=this._$5S.getPartsDataIndex(I.getID(a))),0>a?0:this._$5S.getPartsOpacity(a)};e.prototype.getDrawParam=function(){};e.prototype.getDrawDataIndex=function(a){return this._$5S.getDrawDataIndex(sa.getID(a))};e.prototype.getDrawData=function(a){return this._$5S.getDrawData(a)};e.prototype.getTransformedPoints=function(a){a=this._$5S._$C2(a);return a instanceof Qa?a.getTransformedPoints():null};e.prototype.getIndexArray=function(a){if(0>a||a>=this._$5S._$aS.length)return null;a=this._$5S._$aS[a];return null!=a&&a.getType()==L._$wb&&a instanceof R?a.getIndexArray():null};l.CHANNEL_COUNT=4;l.RENDER_TEXTURE_USE_MIPMAP=!1;l.NOT_USED_FRAME=-100;l.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var a=this.CHANNEL_COLORS.length-1;0<=a;--a)this.CHANNEL_COLORS.splice(a,1);this.CHANNEL_COLORS=[]}this.releaseShader()};l.prototype.releaseShader=function(){for(var a=u.frameBuffers.length,b=0;b<a;b++)this.gl.deleteFramebuffer(u.frameBuffers[b].framebuffer);u.frameBuffers=[];u.glContext=[]};l.prototype.init=function(a,b,c){for(var g=0;g<b.length;g++){var f=b[g].getClipIDList();if(null!=f){var v=this.findSameClip(f);null==v&&(v=new ba(this,a,f),this.clipContextList.push(v));var f=b[g].getDrawDataID(),d=a.getDrawDataIndex(f);v.addClippedDrawData(f,d);c[g].clipBufPre_clipContext=v}}};l.prototype.getMaskRenderTexture=function(){var a=null;return a=this.dp_webgl.createFramebuffer(),u.frameBuffers[this.dp_webgl.glno]=a,this.dp_webgl.glno};l.prototype.setupClip=function(a,b){for(var c=0,g=0;g<this.clipContextList.length;g++){var f=this.clipContextList[g];this.calcClippedDrawTotalBounds(a,f);f.isUsing&&c++}if(0<c){var v=b.gl.getParameter(b.gl.FRAMEBUFFER_BINDING),d=Array(4);d[0]=0;d[1]=0;d[2]=b.gl.canvas.width;d[3]=b.gl.canvas.height;b.gl.viewport(0,0,u.clippingMaskBufferSize,u.clippingMaskBufferSize);this.setupLayoutBounds(c);b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,u.frameBuffers[this.curFrameNo].framebuffer);b.gl.clearColor(0,0,0,0);b.gl.clear(b.gl.COLOR_BUFFER_BIT);for(g=0;g<this.clipContextList.length;g++){var f=this.clipContextList[g],n=f.allClippedDrawRect,c=(f.layoutChannelNo,f.layoutBounds);this.tmpBoundsOnModel._$jL(n);this.tmpBoundsOnModel.expand(.05*n.width,.05*n.height);var n=c.width/this.tmpBoundsOnModel.width,t=c.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity();this.tmpMatrix2.translate(-1,-1,0);this.tmpMatrix2.scale(2,2,1);this.tmpMatrix2.translate(c.x,c.y,0);this.tmpMatrix2.scale(n,t,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m);this.tmpMatrix2.identity();this.tmpMatrix2.translate(c.x,c.y,0);this.tmpMatrix2.scale(n,t,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);n=this.tmpMatrixForMask.getArray();for(c=0;16>c;c++)f.matrixForMask[c]=n[c];n=this.tmpMatrixForDraw.getArray();for(c=0;16>c;c++)f.matrixForDraw[c]=n[c];c=f.clippingMaskDrawIndexList.length;for(n=0;n<c;n++){var e=f.clippingMaskDrawIndexList[n],t=a.getDrawData(e),e=a._$C2(e);b.setClipBufPre_clipContextForMask(f);t.draw(b,a,e)}}b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,v);b.setClipBufPre_clipContextForMask(null);b.gl.viewport(d[0],d[1],d[2],d[3])}};l.prototype.getColorBuffer=function(){return this.colorBuffer};l.prototype.findSameClip=function(a){for(var b=0;b<this.clipContextList.length;b++){var c=this.clipContextList[b],g=c.clipIDList.length;if(g==a.length){for(var f=0,v=0;v<g;v++)for(var d=c.clipIDList[v],n=0;n<g;n++)if(a[n]==d){f++;break}if(f==g)return c}}return null};l.prototype.calcClippedDrawTotalBounds=function(a,b){for(var c=a._$Ri.getModelImpl().getCanvasWidth(),g=a._$Ri.getModelImpl().getCanvasHeight(),f=g=c=c>g?c:g,v=0,d=0,n=b.clippedDrawContextList.length,t=0;t<n;t++){var e=a._$C2(b.clippedDrawContextList[t].drawDataIndex);if(e._$yo()){for(var h=e.getTransformedPoints(),k=h.length,l=[],e=[],q=0,p=Q._$i2;p<k;p+=Q._$No)l[q]=h[p],e[q]=h[p+1],q++;h=Math.min.apply(null,l);k=Math.min.apply(null,e);l=Math.max.apply(null,l);e=Math.max.apply(null,e);h<g&&(g=h);k<f&&(f=k);l>v&&(v=l);e>d&&(d=e)}}g==c?(b.allClippedDrawRect.x=0,b.allClippedDrawRect.y=0,b.allClippedDrawRect.width=0,b.allClippedDrawRect.height=0,b.isUsing=!1):(b.allClippedDrawRect.x=g,b.allClippedDrawRect.y=f,b.allClippedDrawRect.width=v-g,b.allClippedDrawRect.height=d-f,b.isUsing=!0)};l.prototype.setupLayoutBounds=function(a){var b=a/l.CHANNEL_COUNT;a%=l.CHANNEL_COUNT;b=~~b;a=~~a;for(var c=0,g=0;g<l.CHANNEL_COUNT;g++){var f=b+(g<a?1:0);if(0!=f)if(1==f){var v=this.clipContextList[c++];v.layoutChannelNo=g;v.layoutBounds.x=0;v.layoutBounds.y=0;v.layoutBounds.width=1;v.layoutBounds.height=1}else if(2==f)for(var K=0;K<f;K++){var n=K%2,t,n=~~n,v=this.clipContextList[c++];v.layoutChannelNo=g;v.layoutBounds.x=.5*n;v.layoutBounds.y=0;v.layoutBounds.width=.5;v.layoutBounds.height=1}else if(4>=f)for(K=0;K<f;K++)n=K%2,t=K/2,n=~~n,t=~~t,v=this.clipContextList[c++],v.layoutChannelNo=g,v.layoutBounds.x=.5*n,v.layoutBounds.y=.5*t,v.layoutBounds.width=.5,v.layoutBounds.height=.5;else if(9>=f)for(K=0;K<f;K++)n=K%3,t=K/3,n=~~n,t=~~t,v=this.clipContextList[c++],v.layoutChannelNo=g,v.layoutBounds.x=n/3,v.layoutBounds.y=t/3,v.layoutBounds.width=1/3,v.layoutBounds.height=1/3;else d._$li("_$6 _$0P mask count : %d",f)}};ba.prototype.addClippedDrawData=function(a,b){var c=new r(a,b);this.clippedDrawContextList.push(c)};h._$JT=function(a,b,c){a/=b;c/=b;b=1-(1-c)*(1-c);var g=1-(1-c)*(1-c);b=1/3*(1-c)*b+(2/3*c+1/3*(1-c))*(1-b);c=(c+2/3*(1-c))*g+(1/3*c+2/3*(1-c))*(1-g);if(0>=a)return 0;if(1<=a)return 1;g=a*a;return(1-3*c+3*b-0)*a*g+(3*c-6*b+0)*g+(3*b-0)*a+0};h.prototype._$a0=function(){};h.prototype.setFadeIn=function(a){this._$dP=a};h.prototype.setFadeOut=function(a){this._$eo=a};h.prototype._$pT=function(a){this._$V0=a};h.prototype.getFadeOut=function(){return this._$eo};h.prototype._$4T=function(){return this._$eo};h.prototype._$mT=function(){return this._$V0};h.prototype.getDurationMSec=function(){return-1};h.prototype.getLoopDurationMSec=function(){return-1};h.prototype.updateParam=function(a,b){if(b._$AT&&!b._$9L){var c=B.getUserTimeMSec();if(0>b._$z2){b._$z2=c;b._$bs=c;var g=this.getDurationMSec();0>b._$Do&&(b._$Do=0>=g?-1:b._$z2+g)}g=this._$V0;g=g*(0==this._$dP?1:Ra._$r2((c-b._$bs)/this._$dP))*(0==this._$eo||0>b._$Do?1:Ra._$r2((b._$Do-c)/this._$eo));0<=g&&1>=g||console.log("### assert!! ### ");this.updateParamExe(a,c,g,b);0<b._$Do&&b._$Do<c&&(b._$9L=!0)}};h.prototype.updateParamExe=function(a,b,c,g){};d._$8s=0;d._$fT={};d.start=function(a){var b=d._$fT[a];null==b&&(b=new H,b._$r=a,d._$fT[a]=b);b._$0S=B.getSystemTimeMSec()};d.dump=function(a){var b=d._$fT[a];return null!=b?(b=B.getSystemTimeMSec()-b._$0S,console.log(a+" : "+b+"ms"),b):-1};d.end=function(a){a=d._$fT[a];return null!=a?B.getSystemTimeMSec()-a._$0S:-1};d._$li=function(a,b){console.log("_$li : "+a+"\n",b)};d._$Ji=function(a,b){console.log(a,b)};d._$dL=function(a,b){console.log(a,b);console.log("\n")};d._$KL=function(a,b){for(var c=0;c<b;c++)0==c%16&&0<c?console.log("\n"):0==c%8&&0<c&&console.log("  "),console.log("%02X ",255&a[c]);console.log("\n")};d._$nr=function(a,b,c){console.log("%s\n",a);a=b.length;for(var g=0;g<a;++g)console.log("%5d",b[g]),console.log("%s\n",c),console.log(",");console.log("\n")};d._$Rb=function(a){console.log("dump exception : "+a);console.log("stack :: "+a.stack)};q.prototype._$8P=function(){return.5*(this.x+this.x+this.width)};q.prototype._$6P=function(){return.5*(this.y+this.y+this.height)};q.prototype._$EL=function(){return this.x+this.width};q.prototype._$5T=function(){return this.y+this.height};q.prototype._$jL=function(a,b,c,g){this.x=a;this.y=b;this.width=c;this.height=g};q.prototype._$jL=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};I.prototype=new Da;I._$tP={};I._$27=function(){I._$tP.clear()};I.getID=function(a){var b=I._$tP[a];return null==b&&(b=new I(a),I._$tP[a]=b),b};I.prototype._$3s=function(){return new I};A.prototype=new Da;A._$tP={};A._$27=function(){A._$tP.clear()};A.getID=function(a){var b=A._$tP[a];return null==b&&(b=new A(a),A._$tP[a]=b),b};A.prototype._$3s=function(){return new A};F._$42=0;F.prototype._$zP=function(){null==this._$vo&&(this._$vo=new Ha);null==this._$F2&&(this._$F2=[])};F.prototype.getCanvasWidth=function(){return this._$ao};F.prototype.getCanvasHeight=function(){return this._$1S};F.prototype._$F0=function(a){this._$vo=a._$nP();this._$F2=a._$nP();this._$ao=a._$6L();this._$1S=a._$6L()};F.prototype._$6S=function(a){this._$F2.push(a)};F.prototype._$Xr=function(){return this._$F2};F.prototype._$E2=function(){return this._$vo};x.prototype.setup=function(a,b,c){this._$ks=this._$Yb();this.p2._$xT();3==arguments.length&&(this._$Fo=a,this._$L2=b,this.p1._$p=c,this.p2._$p=c,this.p2.y=a,this.setup())};x.prototype.getPhysicsPoint1=function(){return this.p1};x.prototype.getPhysicsPoint2=function(){return this.p2};x.prototype._$qr=function(){return this._$Db};x.prototype._$pr=function(a){this._$Db=a};x.prototype._$5r=function(){return this._$M2};x.prototype._$Cs=function(){return this._$9b};x.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI};x.prototype.addSrcParam=function(a,b,c,g){a=new G(a,b,c,g);this._$lL.push(a)};x.prototype.addTargetParam=function(a,b,c,g){a=new S(a,b,c,g);this._$qP.push(a)};x.prototype.update=function(a,b){if(0==this._$iP)return this._$iP=this._$iT=b,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var c=(b-this._$iT)/1E3;if(0!=c){for(var g=this._$lL.length-1;0<=g;--g)this._$lL[g]._$oP(a,this);this._$oo(a,c);this._$M2=this._$Yb();this._$9b=(this._$M2-this._$ks)/c;this._$ks=this._$M2}for(g=this._$qP.length-1;0<=g;--g)this._$qP[g]._$YS(a,this);this._$iT=b};x.prototype._$oo=function(a,b){.033>b&&(b=.033);var c=1/b;this.p1.vx=(this.p1.x-this.p1._$s0)*c;this.p1.vy=(this.p1.y-this.p1._$70)*c;this.p1.ax=(this.p1.vx-this.p1._$7L)*c;this.p1.ay=(this.p1.vy-this.p1._$HL)*c;this.p1.fx=this.p1.ax*this.p1._$p;this.p1.fy=this.p1.ay*this.p1._$p;this.p1._$xT();var g=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),f=Math.cos(g),v=Math.sin(g),g=9.8*this.p2._$p*Math.cos(g-this._$Db*da._$bS),d=-this.p1.fy*v*f,n=-this.p2.vy*this._$L2;this.p2.fx=g*v+-this.p1.fx*v*v+-this.p2.vx*this._$L2;this.p2.fy=g*f+d+n;this.p2.ax=this.p2.fx/this.p2._$p;this.p2.ay=this.p2.fy/this.p2._$p;this.p2.vx+=this.p2.ax*b;this.p2.vy+=this.p2.ay*b;this.p2.x+=this.p2.vx*b;this.p2.y+=this.p2.vy*b;f=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/f;this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/f;this.p2.vx=(this.p2.x-this.p2._$s0)*c;this.p2.vy=(this.p2.y-this.p2._$70)*c;this.p2._$xT()};J.prototype._$xT=function(){this._$s0=this.x;this._$70=this.y;this._$7L=this.vx;this._$HL=this.vy};k.prototype._$oP=function(a,b){};G.prototype=new k;G.prototype._$oP=function(a,b){var c=this.scale*a.getParamFloat(this._$wL),g=b.getPhysicsPoint1();switch(this._$tL){default:case x.Src.SRC_TO_X:g.x+=(c-g.x)*this._$V0;break;case x.Src.SRC_TO_Y:g.y+=(c-g.y)*this._$V0;break;case x.Src.SRC_TO_G_ANGLE:g=b._$qr(),g+=(c-g)*this._$V0,b._$pr(g)}};N.prototype._$YS=function(a,b){};S.prototype=new N;S.prototype._$YS=function(a,b){switch(this._$YP){default:case x.Target.TARGET_FROM_ANGLE:a.setParamFloat(this._$wL,this.scale*b._$5r(),this._$V0);break;case x.Target.TARGET_FROM_ANGLE_V:a.setParamFloat(this._$wL,this.scale*b._$Cs(),this._$V0)}};x.Src=function(){};x.Src.SRC_TO_X="SRC_TO_X";x.Src.SRC_TO_Y="SRC_TO_Y";x.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE";x.Target=function(){};x.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE";x.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";na.prototype.init=function(a){this._$fL=a._$fL;this._$gL=a._$gL;this._$B0=a._$B0;this._$z0=a._$z0;this._$qT=a._$qT;this.reflectX=a.reflectX;this.reflectY=a.reflectY};na.prototype._$F0=function(a){this._$fL=a._$_T();this._$gL=a._$_T();this._$B0=a._$_T();this._$z0=a._$_T();this._$qT=a._$_T();a.getFormatVersion()>=Z.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=a._$po(),this.reflectY=a._$po())};na.prototype._$e=function(){};var Ua=function(){};Ua._$ni=function(a,b,c,g,f,v,d,n,t){var K=d*v-n*f;if(0==K)return null;var e,K=((a-c)*v-(b-g)*f)/K;return e=0!=f?(a-c-K*d)/f:(b-g-K*n)/v,isNaN(e)&&(e=(a-c-K*d)/f,isNaN(e)&&(e=(b-g-K*n)/v),isNaN(e)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+f),console.log("v1x !\x3d 0 ? "+(0!=f)))),null==t?[e,K]:(t[0]=e,t[1]=K,t)};ea.prototype._$8P=function(){return this.x+.5*this.width};ea.prototype._$6P=function(){return this.y+.5*this.height};ea.prototype._$EL=function(){return this.x+this.width};ea.prototype._$5T=function(){return this.y+this.height};ea.prototype._$jL=function(a,b,c,g){this.x=a;this.y=b;this.width=c;this.height=g};ea.prototype._$jL=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};ea.prototype.contains=function(a,b){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height};ea.prototype.expand=function(a,b){this.x-=a;this.y-=b;this.width+=2*a;this.height+=2*b};va._$Z2=function(a,b,c,g){var f=b._$Q2(a,c);c=a._$vs();a=a._$Tr();if(b._$zr(c,a,f),0>=f)return g[c[0]];if(1==f)return f=g[c[0]],b=g[c[1]],g=a[0],f+(b-f)*g|0;if(2==f){f=g[c[0]];b=g[c[1]];var v=g[c[2]],d=g[c[3]];g=a[0];c=a[1];f=f+(b-f)*g|0;return f+((v+(d-v)*g|0)-f)*c|0}if(3==f){var f=g[c[0]],v=g[c[1]],n=g[c[2]],d=g[c[3]],t=g[c[4]],e=g[c[5]],h=g[c[6]],k=g[c[7]];g=a[0];c=a[1];b=a[2];f=f+(v-f)*g|0;v=t+(e-t)*g|0;f=f+((n+(d-n)*g|0)-f)*c|0;return f+((v+((h+(k-h)*g|0)-v)*c|0)-f)*b|0}if(4==f){var f=g[c[0]],l=g[c[1]],q=g[c[2]],p=g[c[3]],n=g[c[4]],u=g[c[5]],e=g[c[6]],k=g[c[7]],t=g[c[8]],r=g[c[9]],v=g[c[10]],x=g[c[11]],h=g[c[12]],w=g[c[13]],d=g[c[14]],H=g[c[15]];g=a[0];c=a[1];b=a[2];a=a[3];f=f+(l-f)*g|0;n=n+(u-n)*g|0;t=t+(r-t)*g|0;h=h+(w-h)*g|0;f=f+((q+(p-q)*g|0)-f)*c|0;v=t+((v+(x-v)*g|0)-t)*c|0;f=f+((n+((e+(k-e)*g|0)-n)*c|0)-f)*b|0;g=v+((h+((d+(H-d)*g|0)-h)*c|0)-v)*b|0;return f+(g-f)*a|0}b=1<<f;d=new Float32Array(b);for(n=0;n<b;n++){e=n;k=1;for(v=0;v<f;v++)k*=0==e%2?1-a[v]:a[v],e/=2;d[n]=k}a=new Float32Array(b);for(f=0;f<b;f++)a[f]=g[c[f]];for(f=g=0;f<b;f++)g+=d[f]*a[f];return g+.5|0};va._$br=function(a,b,c,g){var f=b._$Q2(a,c);c=a._$vs();a=a._$Tr();if(b._$zr(c,a,f),0>=f)return g[c[0]];if(1==f){b=g[c[0]];var v=g[c[1]];g=a[0];return b+(v-b)*g}if(2==f){b=g[c[0]];var v=g[c[1]],f=g[c[2]],d=g[c[3]];g=a[0];c=a[1];return(1-c)*(b+(v-b)*g)+c*(f+(d-f)*g)}if(3==f){var v=g[c[0]],f=g[c[1]],d=g[c[2]],n=g[c[3]],t=g[c[4]],e=g[c[5]],h=g[c[6]],k=g[c[7]];g=a[0];c=a[1];b=a[2];return(1-b)*((1-c)*(v+(f-v)*g)+c*(d+(n-d)*g))+b*((1-c)*(t+(e-t)*g)+c*(h+(k-h)*g))}if(4==f){var v=g[c[0]],f=g[c[1]],d=g[c[2]],n=g[c[3]],t=g[c[4]],e=g[c[5]],h=g[c[6]],k=g[c[7]],l=g[c[8]],q=g[c[9]],p=g[c[10]],u=g[c[11]],r=g[c[12]],x=g[c[13]],w=g[c[14]],H=g[c[15]];g=a[0];c=a[1];b=a[2];a=a[3];return(1-a)*((1-b)*((1-c)*(v+(f-v)*g)+c*(d+(n-d)*g))+b*((1-c)*(t+(e-t)*g)+c*(h+(k-h)*g)))+a*((1-b)*((1-c)*(l+(q-l)*g)+c*(p+(u-p)*g))+b*((1-c)*(r+(x-r)*g)+c*(w+(H-w)*g)))}b=1<<f;v=new Float32Array(b);for(d=0;d<b;d++){n=d;t=1;for(e=0;e<f;e++)t*=0==n%2?1-a[e]:a[e],n/=2;v[d]=t}a=new Float32Array(b);for(f=0;f<b;f++)a[f]=g[c[f]];for(f=g=0;f<b;f++)g+=v[f]*a[f];return g};va._$Vr=function(a,b,c,g,f,v,d,n){var t=b._$Q2(a,c);c=a._$vs();a=a._$Tr();b._$zr(c,a,t);b=2*g;g=d;if(0>=t){var e=f[c[0]];if(2==n&&0==d)B._$jT(e,0,v,0,b);else for(f=0;f<b;)v[g]=e[f++],v[g+1]=e[f++],g+=n}else if(1==t)for(e=f[c[0]],t=f[c[1]],c=a[0],a=1-c,f=0;f<b;)v[g]=e[f]*a+t[f]*c,++f,v[g+1]=e[f]*a+t[f]*c,++f,g+=n;else if(2==t){var e=f[c[0]],t=f[c[1]],h=f[c[2]],K=f[c[3]];c=a[0];f=a[1];a=1-c;d=1-f;var k=d*a;d*=c;a*=f;c*=f;for(f=0;f<b;)v[g]=k*e[f]+d*t[f]+a*h[f]+c*K[f],++f,v[g+1]=k*e[f]+d*t[f]+a*h[f]+c*K[f],++f,g+=n}else if(3==t){var h=f[c[0]],K=f[c[1]],k=f[c[2]],l=f[c[3]],q=f[c[4]],p=f[c[5]],u=f[c[6]],r=f[c[7]];c=a[0];f=a[1];e=a[2];a=1-c;d=1-f;var t=1-e,x=t*d*a,w=t*d*c,H=t*f*a,t=t*f*c,A=e*d*a;d=e*d*c;a*=e*f;c*=e*f;for(f=0;f<b;)v[g]=x*h[f]+w*K[f]+H*k[f]+t*l[f]+A*q[f]+d*p[f]+a*u[f]+c*r[f],++f,v[g+1]=x*h[f]+w*K[f]+H*k[f]+t*l[f]+A*q[f]+d*p[f]+a*u[f]+c*r[f],++f,g+=n}else if(4==t){var h=f[c[0]],K=f[c[1]],k=f[c[2]],l=f[c[3]],q=f[c[4]],p=f[c[5]],u=f[c[6]],r=f[c[7]],x=f[c[8]],w=f[c[9]],H=f[c[10]],A=f[c[11]],D=f[c[12]],z=f[c[13]],ya=f[c[14]],I=f[c[15]];c=a[0];f=a[1];var e=a[2],la=a[3];a=1-c;d=1-f;var t=1-e,M=1-la,C=M*t*d*a,G=M*t*d*c,F=M*t*f*a,y=M*t*f*c,E=M*e*d*a,J=M*e*d*c,L=M*e*f*a,M=M*e*f*c,ba=la*t*d*a,N=la*t*d*c,O=la*t*f*a,t=la*t*f*c,P=la*e*d*a;d=la*e*d*c;a*=la*e*f;c*=la*e*f;for(f=0;f<b;)v[g]=C*h[f]+G*K[f]+F*k[f]+y*l[f]+E*q[f]+J*p[f]+L*u[f]+M*r[f]+ba*x[f]+N*w[f]+O*H[f]+t*A[f]+P*D[f]+d*z[f]+a*ya[f]+c*I[f],++f,v[g+1]=C*h[f]+G*K[f]+F*k[f]+y*l[f]+E*q[f]+J*p[f]+L*u[f]+M*r[f]+ba*x[f]+N*w[f]+O*H[f]+t*A[f]+P*D[f]+d*z[f]+a*ya[f]+c*I[f],++f,g+=n}else{d=1<<t;e=new Float32Array(d);for(h=0;h<d;h++){K=h;k=1;for(l=0;l<t;l++)k*=0==K%2?1-a[l]:a[l],K/=2;e[h]=k}a=new Float32Array(d);for(t=0;t<d;t++)a[t]=f[c[t]];for(f=0;f<b;){h=c=0;K=f+1;for(t=0;t<d;t++)c+=e[t]*a[t][f],h+=e[t]*a[t][K];f+=2;v[g]=c;v[g+1]=h;g+=n}}};pa.prototype._$HT=function(a,b){this.x=a;this.y=b};pa.prototype._$HT=function(a){this.x=a.x;this.y=a.y};E._$ur=-2;E._$ES=500;E._$wb=2;E._$8S=3;E._$52=E._$ES;E._$R2=E._$ES;E._$or=function(){return E._$52};E._$Pr=function(){return E._$R2};E.prototype.convertClipIDForV2_11=function(a){var b=[];return null==a?null:0==a.length?null:/,/.test(a)?a.id.split(","):(b.push(a.id),b)};E.prototype._$F0=function(a){this._$gP=a._$nP();this._$dr=a._$nP();this._$GS=a._$nP();this._$qb=a._$6L();this._$Lb=a._$cS();this._$mS=a._$Tb();a.getFormatVersion()>=Z._$T7?(this.clipID=a._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[];this._$MS(this._$Lb)};E.prototype.getClipIDList=function(){return this.clipIDList};E.prototype.init=function(a){};E.prototype._$Nr=function(a,b){if((b._$IS[0]=!1,b._$Us=va._$Z2(a,this._$GS,b._$IS,this._$Lb),u._$Zs)||!b._$IS[0])b._$7s=va._$br(a,this._$GS,b._$IS,this._$mS)};E.prototype._$2b=function(a,b){};E.prototype.getDrawDataID=function(){return this._$gP};E.prototype._$j2=function(a){this._$gP=a};E.prototype.getOpacity=function(a,b){return b._$7s};E.prototype._$zS=function(a,b){return b._$Us};E.prototype._$MS=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b];c<E._$52?E._$52=c:c>E._$R2&&(E._$R2=c)}};E.prototype.getTargetBaseDataID=function(){return this._$dr};E.prototype._$gs=function(a){this._$dr=a};E.prototype._$32=function(){return null!=this._$dr&&this._$dr!=aa._$2o()};E.prototype.preDraw=function(a,b,c){};E.prototype.draw=function(a,b,c){};E.prototype.getType=function(){};E.prototype._$B2=function(a,b,c){};P._$ps=32;P.CLIPPING_PROCESS_NONE=0;P.CLIPPING_PROCESS_OVERWRITE_ALPHA=1;P.CLIPPING_PROCESS_MULTIPLY_ALPHA=2;P.CLIPPING_PROCESS_DRAW=3;P.CLIPPING_PROCESS_CLEAR_ALPHA=4;P.prototype.setChannelFlagAsColor=function(a,b){this.CHANNEL_COLORS[a]=b};P.prototype.getChannelFlagAsColor=function(a){return this.CHANNEL_COLORS[a]};P.prototype._$ZT=function(){};P.prototype._$Uo=function(a,b,c,g,f,v,d){};P.prototype._$Rs=function(){return-1};P.prototype._$Ds=function(a){};P.prototype.setBaseColor=function(a,b,c,g){0>a?a=0:1<a&&(a=1);0>b?b=0:1<b&&(b=1);0>c?c=0:1<c&&(c=1);0>g?g=0:1<g&&(g=1);this._$lT=a;this._$C0=b;this._$tT=c;this._$WL=g};P.prototype._$WP=function(a){this.culling=a};P.prototype.setMatrix=function(a){for(var b=0;16>b;b++)this.matrix4x4[b]=a[b]};P.prototype._$IT=function(){return this.matrix4x4};P.prototype.setPremultipliedAlpha=function(a){this.premultipliedAlpha=a};P.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha};P.prototype.setAnisotropy=function(a){this.anisotropy=a};P.prototype.getAnisotropy=function(){return this.anisotropy};P.prototype.getClippingProcess=function(){return this.clippingProcess};P.prototype.setClippingProcess=function(a){this.clippingProcess=a};P.prototype.setClipBufPre_clipContextForMask=function(a){this.clipBufPre_clipContextMask=a};P.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask};P.prototype.setClipBufPre_clipContextForDraw=function(a){this.clipBufPre_clipContextDraw=a};P.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};C._$ur=-2;C._$c2=1;C._$_b=2;C.prototype._$F0=function(a){this._$kP=a._$nP();this._$dr=a._$nP()};C.prototype.readV2_opacity=function(a){a.getFormatVersion()>=Z.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=a._$Tb())};C.prototype.init=function(a){};C.prototype._$Nr=function(a,b){};C.prototype.interpolateOpacity=function(a,b,c,g){null==this._$mS?c.setInterpolatedOpacity(1):c.setInterpolatedOpacity(va._$br(a,b,g,this._$mS))};C.prototype._$2b=function(a,b){};C.prototype._$nb=function(a,b,c,g,f,v,d){};C.prototype.getType=function(){};C.prototype._$gs=function(a){this._$dr=a};C.prototype._$a2=function(a){this._$kP=a};C.prototype.getTargetBaseDataID=function(){return this._$dr};C.prototype.getBaseDataID=function(){return this._$kP};C.prototype._$32=function(){return null!=this._$dr&&this._$dr!=aa._$2o()};B._$W2=0;B._$CS=B._$W2;B._$Mo=function(){return!0};B._$XP=function(a){try{for(var b=getTimeMSec();getTimeMSec()-b<a;);}catch(c){c._$Rb()}};B.getUserTimeMSec=function(){return B._$CS==B._$W2?B.getSystemTimeMSec():B._$CS};B.setUserTimeMSec=function(a){B._$CS=a};B.updateUserTimeMSec=function(){return B._$CS=B.getSystemTimeMSec()};B.getTimeMSec=function(){return(new Date).getTime()};B.getSystemTimeMSec=function(){return(new Date).getTime()};B._$Q=function(a){};B._$jT=function(a,b,c,g,f){for(var v=0;v<f;v++)c[g+v]=a[b+v]};ia._$ds=-2;ia.prototype._$F0=function(a){this._$wL=a._$nP();this._$VP=a._$6L();this._$GP=a._$nP()};ia.prototype.getParamIndex=function(a){return this._$2r!=a&&(this._$8o=ia._$ds),this._$8o};ia.prototype._$Pb=function(a,b){this._$8o=a;this._$2r=b};ia.prototype.getParamID=function(){return this._$wL};ia.prototype._$yP=function(a){this._$wL=a};ia.prototype._$N2=function(){return this._$VP};ia.prototype._$d2=function(){return this._$GP};ia.prototype._$t2=function(a,b){this._$VP=a;this._$GP=b};ia.prototype._$Lr=function(){return this._$O2};ia.prototype._$wr=function(a){this._$O2=a};ia.prototype._$SL=function(){return this._$ri};ia.prototype._$AL=function(a){this._$ri=a};T.startsWith=function(a,b,c){var g=b+c.length;if(g>=a.length)return!1;for(var f=b;f<g;f++)if(T.getChar(a,f)!=c.charAt(f-b))return!1;return!0};T.getChar=function(a,b){return String.fromCharCode(a.getUint8(b))};T.createString=function(a,b,c){for(var g=new ArrayBuffer(2*c),g=new Uint16Array(g),f=0;f<c;f++)g[f]=a.getUint8(b+f);return String.fromCharCode.apply(null,g)};T._$LS=function(a,b,c,g){a instanceof ArrayBuffer&&(a=new DataView(a));var f=!1,v=!1,d=0;"-"==T.getChar(a,c)&&(f=!0,c++);for(var n=!1;c<b;c++){switch(T.getChar(a,c)){case "0":d*=10;break;case "1":d=10*d+1;break;case "2":d=10*d+2;break;case "3":d=10*d+3;break;case "4":d=10*d+4;break;case "5":d=10*d+5;break;case "6":d=10*d+6;break;case "7":d=10*d+7;break;case "8":d=10*d+8;break;case "9":d=10*d+9;break;case ".":v=!0;c++;n=!0;break;default:n=!0}if(n)break}if(v)for(v=.1,n=!1;c<b;c++){switch(T.getChar(a,c)){case "0":break;case "1":d+=1*v;break;case "2":d+=2*v;break;case "3":d+=3*v;break;case "4":d+=4*v;break;case "5":d+=5*v;break;case "6":d+=6*v;break;case "7":d+=7*v;break;case "8":d+=8*v;break;case "9":d+=9*v;break;default:n=!0}if(v*=.1,n)break}return f&&(d=-d),g[0]=c,d};xa.prototype._$zP=function(){this._$Ob=[]};xa.prototype._$F0=function(a){this._$Ob=a._$nP()};xa.prototype._$Ur=function(a){if(a._$WS())return!0;for(var b=a._$v2(),c=this._$Ob.length-1;0<=c;--c){var g=this._$Ob[c].getParamIndex(b);if(g==ia._$ds&&(g=a.getParamIndex(this._$Ob[c].getParamID())),a._$Xb(g))return!0}return!1};xa.prototype._$Q2=function(a,b){for(var c,g,f=this._$Ob.length,d=a._$v2(),e=0,n=0;n<f;n++){var t=this._$Ob[n];if(c=t.getParamIndex(d),c==ia._$ds&&(c=a.getParamIndex(t.getParamID()),t._$Pb(c,d)),0>c)throw new Exception("err 23242 : "+t.getParamID());var h=0>c?0:a.getParamFloat(c);g=t._$N2();var k,l,q=t._$d2(),p=-1,u=0;if(!(1>g))if(1==g)k=q[0],k-Q._$J<h&&h<k+Q._$J?(p=0,u=0):(p=0,b[0]=!0);else if(k=q[0],h<k-Q._$J)p=0,b[0]=!0;else if(h<k+Q._$J)p=0;else{for(var r=!1,x=1;x<g;++x){if(l=q[x],h<l+Q._$J){l-Q._$J<h?p=x:(p=x-1,u=(h-k)/(l-k),e++);r=!0;break}k=l}r||(p=g-1,u=0,b[0]=!0)}t._$wr(p);t._$AL(u)}return e};xa.prototype._$zr=function(a,b,c){c=1<<c;c+1>Q._$Qb&&console.log("err 23245\n");for(var g=this._$Ob.length,f=1,d=1,e=0,n=0;n<c;++n)a[n]=0;for(var t=0;t<g;++t){var h=this._$Ob[t];if(0==h._$SL()){var k=h._$Lr()*f;if(0>k&&u._$3T)throw new Exception("err 23246");for(n=0;n<c;++n)a[n]+=k}else{for(var k=f*h._$Lr(),l=f*(h._$Lr()+1),n=0;n<c;++n)a[n]+=0==(n/d|0)%2?k:l;b[e++]=h._$SL();d*=2}f*=h._$N2()}a[c]=65535;b[e]=-1};xa.prototype._$h2=function(a,b,c){for(var g=new Float32Array(b),f=0;f<b;++f)g[f]=c[f];c=new ia;c._$yP(a);c._$t2(b,g);this._$Ob.push(c)};xa.prototype._$J2=function(a){for(var b=this._$Ob.length,c=0;c<b;++c){var g=this._$Ob[c],f=g._$N2(),d=a%g._$N2(),e=g._$d2()[d];console.log("%s[%d]\x3d%7.2f / ",g.getParamID(),d,e);a/=f}console.log("\n")};xa.prototype.getParamCount=function(){return this._$Ob.length};xa.prototype._$zs=function(){return this._$Ob};qa.prototype.identity=function(){for(var a=0;16>a;a++)this.m[a]=0==a%5?1:0};qa.prototype.getArray=function(){return this.m};qa.prototype.getCopyMatrix=function(){return new Float32Array(this.m)};qa.prototype.setMatrix=function(a){if(null!=a&&16==a.length)for(var b=0;16>b;b++)this.m[b]=a[b]};qa.prototype.mult=function(a,b,c){return null==b?null:(this==b?this.mult_safe(this.m,a.m,b.m,c):this.mult_fast(this.m,a.m,b.m,c),b)};qa.prototype.mult_safe=function(a,b,c,g){if(a==c){var f=Array(16);this.mult_fast(a,b,f,g);for(a=15;0<=a;--a)c[a]=f[a]}else this.mult_fast(a,b,c,g)};qa.prototype.mult_fast=function(a,b,c,g){g?(c[0]=a[0]*b[0]+a[4]*b[1]+a[8]*b[2],c[4]=a[0]*b[4]+a[4]*b[5]+a[8]*b[6],c[8]=a[0]*b[8]+a[4]*b[9]+a[8]*b[10],c[12]=a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12],c[1]=a[1]*b[0]+a[5]*b[1]+a[9]*b[2],c[5]=a[1]*b[4]+a[5]*b[5]+a[9]*b[6],c[9]=a[1]*b[8]+a[5]*b[9]+a[9]*b[10],c[13]=a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13],c[2]=a[2]*b[0]+a[6]*b[1]+a[10]*b[2],c[6]=a[2]*b[4]+a[6]*b[5]+a[10]*b[6],c[10]=a[2]*b[8]+a[6]*b[9]+a[10]*b[10],c[14]=a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14],c[3]=c[7]=c[11]=0,c[15]=1):(c[0]=a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],c[4]=a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],c[8]=a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],c[12]=a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],c[1]=a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],c[5]=a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],c[9]=a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],c[13]=a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],c[2]=a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],c[6]=a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],c[10]=a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],c[14]=a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],c[3]=a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],c[7]=a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],c[11]=a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],c[15]=a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15])};qa.prototype.translate=function(a,b,c){this.m[12]=this.m[0]*a+this.m[4]*b+this.m[8]*c+this.m[12];this.m[13]=this.m[1]*a+this.m[5]*b+this.m[9]*c+this.m[13];this.m[14]=this.m[2]*a+this.m[6]*b+this.m[10]*c+this.m[14];this.m[15]=this.m[3]*a+this.m[7]*b+this.m[11]*c+this.m[15]};qa.prototype.scale=function(a,b,c){this.m[0]*=a;this.m[4]*=b;this.m[8]*=c;this.m[1]*=a;this.m[5]*=b;this.m[9]*=c;this.m[2]*=a;this.m[6]*=b;this.m[10]*=c;this.m[3]*=a;this.m[7]*=b;this.m[11]*=c};qa.prototype.rotateX=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[4];this.m[4]=c*b+this.m[8]*a;this.m[8]=c*-a+this.m[8]*b;c=this.m[5];this.m[5]=c*b+this.m[9]*a;this.m[9]=c*-a+this.m[9]*b;c=this.m[6];this.m[6]=c*b+this.m[10]*a;this.m[10]=c*-a+this.m[10]*b;c=this.m[7];this.m[7]=c*b+this.m[11]*a;this.m[11]=c*-a+this.m[11]*b};qa.prototype.rotateY=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[0];this.m[0]=c*b+this.m[8]*-a;this.m[8]=c*a+this.m[8]*b;c=this.m[1];this.m[1]=c*b+this.m[9]*-a;this.m[9]=c*a+this.m[9]*b;c=m[2];this.m[2]=c*b+this.m[10]*-a;this.m[10]=c*a+this.m[10]*b;c=m[3];this.m[3]=c*b+this.m[11]*-a;this.m[11]=c*a+this.m[11]*b};qa.prototype.rotateZ=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[0];this.m[0]=c*b+this.m[4]*a;this.m[4]=c*-a+this.m[4]*b;c=this.m[1];this.m[1]=c*b+this.m[5]*a;this.m[5]=c*-a+this.m[5]*b;c=this.m[2];this.m[2]=c*b+this.m[6]*a;this.m[6]=c*-a+this.m[6]*b;c=this.m[3];this.m[3]=c*b+this.m[7]*a;this.m[7]=c*-a+this.m[7]*b};sa.prototype=new Da;sa._$tP={};sa._$27=function(){sa._$tP.clear()};sa.getID=function(a){var b=sa._$tP[a];return null==b&&(b=new sa(a),sa._$tP[a]=b),b};sa.prototype._$3s=function(){return new sa};z._$kS=-1;z._$pS=0;z._$hb=1;z.STATE_IDENTITY=0;z._$gb=1;z._$fo=2;z._$go=4;z.prototype.transform=function(a,b,c){var g,f,d,e,n,t,h=0,k=0;switch(this._$hi){case z._$go|z._$fo|z._$gb:g=this._$7;f=this._$H;d=this._$k;e=this._$f;n=this._$g;for(t=this._$w;0<=--c;){var l=a[h++],q=a[h++];b[k++]=g*l+f*q+d;b[k++]=e*l+n*q+t}break;case z._$go|z._$fo:g=this._$7;f=this._$H;e=this._$f;for(n=this._$g;0<=--c;)l=a[h++],q=a[h++],b[k++]=g*l+f*q,b[k++]=e*l+n*q;break;case z._$go|z._$gb:f=this._$H;d=this._$k;e=this._$f;for(t=this._$w;0<=--c;)l=a[h++],b[k++]=f*a[h++]+d,b[k++]=e*l+t;break;case z._$go:f=this._$H;for(e=this._$f;0<=--c;)l=a[h++],b[k++]=f*a[h++],b[k++]=e*l;break;case z._$fo|z._$gb:g=this._$7;d=this._$k;n=this._$g;for(t=this._$w;0<=--c;)b[k++]=g*a[h++]+d,b[k++]=n*a[h++]+t;break;case z._$fo:g=this._$7;for(n=this._$g;0<=--c;)b[k++]=g*a[h++],b[k++]=n*a[h++];break;case z._$gb:d=this._$k;for(t=this._$w;0<=--c;)b[k++]=a[h++]+d,b[k++]=a[h++]+t;break;case z.STATE_IDENTITY:return void(a==b&&h==k||B._$jT(a,h,b,k,2*c))}};z.prototype.update=function(){0==this._$H&&0==this._$f?1==this._$7&&1==this._$g?0==this._$k&&0==this._$w?(this._$hi=z.STATE_IDENTITY,this._$Z=z._$pS):(this._$hi=z._$gb,this._$Z=z._$hb):0==this._$k&&0==this._$w?(this._$hi=z._$fo,this._$Z=z._$kS):(this._$hi=z._$fo|z._$gb,this._$Z=z._$kS):0==this._$7&&0==this._$g?0==this._$k&&0==this._$w?(this._$hi=z._$go,this._$Z=z._$kS):(this._$hi=z._$go|z._$gb,this._$Z=z._$kS):0==this._$k&&0==this._$w?(this._$hi=z._$go|z._$fo,this._$Z=z._$kS):(this._$hi=z._$go|z._$fo|z._$gb,this._$Z=z._$kS)};z.prototype._$RT=function(a){this._$IT(a);var b=a[0],c=a[2],g=a[1],f=a[3],d=Math.sqrt(b*b+g*g),e=b*f-c*g;0==d?u._$so&&console.log("affine._$RT() / rt\x3d\x3d0"):(a[0]=d,a[1]=e/d,a[2]=(g*f+b*c)/e,a[3]=Math.atan2(g,b))};z.prototype._$ho=function(a,b,c,g){var f=new Float32Array(6),d=new Float32Array(6);a._$RT(f);b._$RT(d);a=new Float32Array(6);a[0]=f[0]+(d[0]-f[0])*c;a[1]=f[1]+(d[1]-f[1])*c;a[2]=f[2]+(d[2]-f[2])*c;a[3]=f[3]+(d[3]-f[3])*c;a[4]=f[4]+(d[4]-f[4])*c;a[5]=f[5]+(d[5]-f[5])*c;g._$CT(a)};z.prototype._$CT=function(a){var b=Math.cos(a[3]),c=Math.sin(a[3]);this._$7=a[0]*b;this._$f=a[0]*c;this._$H=a[1]*(a[2]*b-c);this._$g=a[1]*(a[2]*c+b);this._$k=a[4];this._$w=a[5];this.update()};z.prototype._$IT=function(a){a[0]=this._$7;a[1]=this._$f;a[2]=this._$H;a[3]=this._$g;a[4]=this._$k;a[5]=this._$w};ga.prototype=new h;ga._$cs="VISIBLE:";ga._$ar="LAYOUT:";ga._$Co=0;ga._$D2=[];ga._$1T=1;ga.loadMotion=function(a){for(var b=new ga,c=[0],g=a.length,f=b._$yT=0;f<g;++f){var d=255&a[f];if("\n"!=d&&"\r"!=d)if("#"!=d)if("$"!=d){if("a"<=d&&"z">=d||"A"<=d&&"Z">=d||"_"==d){for(var e=f,n=-1;f<g&&"\r"!=(d=255&a[f])&&"\n"!=d;++f)if("\x3d"==d){n=f;break}if(0<=n){var t=new O;T.startsWith(a,e,ga._$cs)?(t._$RP=O._$hs,t._$4P=new String(a,e,n-e)):T.startsWith(a,e,ga._$ar)?(t._$4P=new String(a,e+7,n-e-7),T.startsWith(a,e+7,"ANCHOR_X")?t._$RP=O._$xs:T.startsWith(a,e+7,"ANCHOR_Y")?t._$RP=O._$us:T.startsWith(a,e+7,"SCALE_X")?t._$RP=O._$qs:T.startsWith(a,e+7,"SCALE_Y")?t._$RP=O._$Ys:T.startsWith(a,e+7,"X")?t._$RP=O._$ws:T.startsWith(a,e+7,"Y")&&(t._$RP=O._$Ns)):(t._$RP=O._$Fr,t._$4P=new String(a,e,n-e));b.motions.push(t);e=0;ga._$D2.clear();for(f=n+1;f<g&&"\r"!=(d=255&a[f])&&"\n"!=d;++f)if(","!=d&&" "!=d&&"\t"!=d&&(n=T._$LS(a,g,f,c),0<c[0])){ga._$D2.push(n);e++;n=c[0];if(n<f){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}f=n}t._$I0=ga._$D2._$BL();e>b._$yT&&(b._$yT=e)}}}else{e=f;for(n=-1;f<g&&"\r"!=(d=255&a[f])&&"\n"!=d;++f)if("\x3d"==d){n=f;break}t=!1;if(0<=n)for(n==e+4&&"f"==a[e+1]&&"p"==a[e+2]&&"s"==a[e+3]&&(t=!0),f=n+1;f<g&&"\r"!=(d=255&a[f])&&"\n"!=d;++f)","!=d&&" "!=d&&"\t"!=d&&(n=T._$LS(a,g,f,c),0<c[0]&&t&&5<n&&121>n&&(b._$D0=n),f=c[0]);for(;f<g&&"\n"!=a[f]&&"\r"!=a[f];++f);}else for(;f<g&&"\n"!=a[f]&&"\r"!=a[f];++f);}return b._$AS=1E3*b._$yT/b._$D0|0,b};ga.prototype.getDurationMSec=function(){return this._$AS};ga.prototype.dump=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];console.log("_$wL[%s] [%d]. ",b._$4P,b._$I0.length);for(var c=0;c<b._$I0.length&&10>c;c++)console.log("%5.2f ,",b._$I0[c]);console.log("\n")}};ga.prototype.updateParamExe=function(a,b,c,g){for(var f=(b-g._$z2)*this._$D0/1E3,d=0|f,f=f-d,e=0;e<this.motions.length;e++){var n=this.motions[e],t=n._$I0.length,h=n._$4P;if(n._$RP==O._$hs)a.setParamFloat(h,n._$I0[d>=t?t-1:d]);else if(!(O._$ws<=n._$RP&&n._$RP<=O._$Ys)){var k=a.getParamFloat(h),l=n._$I0[d>=t?t-1:d];a.setParamFloat(h,k+(l+(n._$I0[d+1>=t?t-1:d+1]-l)*f-k)*c)}}d>=this._$yT&&(this._$E?(g._$z2=b,this.loopFadeIn&&(g._$bs=b)):g._$9L=!0)};ga.prototype._$r0=function(){return this._$E};ga.prototype._$aL=function(a){this._$E=a};ga.prototype.isLoopFadeIn=function(){return this.loopFadeIn};ga.prototype.setLoopFadeIn=function(a){this.loopFadeIn=a};Fa.prototype.clear=function(){this.size=0};Fa.prototype.add=function(a){if(this._$P.length<=this.size){var b=new Float32Array(2*this.size);B._$jT(this._$P,0,b,0,this.size);this._$P=b}this._$P[this.size++]=a};Fa.prototype._$BL=function(){var a=new Float32Array(this.size);return B._$jT(this._$P,0,a,0,this.size),a};O._$Fr=0;O._$hs=1;O._$ws=100;O._$Ns=101;O._$xs=102;O._$us=103;O._$qs=104;O._$Ys=105;Q._$Ms=1;Q._$Qs=2;Q._$i2=0;Q._$No=2;Q._$do=Q._$Ms;Q._$Ls=!0;Q._$1r=5;Q._$Qb=65;Q._$J=1E-4;Q._$FT=.001;Q._$Ss=3;Z._$o7=6;Z._$S7=7;Z._$s7=8;Z._$77=9;Z.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10;Z.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11;Z._$T7=Z.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1;Z._$Is=-2004318072;Z._$h0=0;Z._$4L=23;Z._$7P=33;Z._$uT=function(a){console.log("_$bo :: _$6 _$mo _$E0 : %d\n",a)};Z._$9o=function(a){if(40>a||50>a||60>a)return Z._$uT(a),null;if(100>a)switch(a){case 65:return new ta;case 66:return new xa;case 67:return new ia;case 68:return new ca;case 69:return new na;case 70:return new R}else if(150>a)switch(a){case 131:return new Ia;case 133:return new ka;case 136:return new F;case 137:return new Ha;case 142:return new Ga}return Z._$uT(a),null};w._$HP=0;w._$_0=!0;w._$V2=-1;w._$W0=-1;w._$jr=!1;w._$ZS=!0;w._$tr=-1E6;w._$lr=1E6;w._$is=32;w._$e=!1;w.prototype.getDrawDataIndex=function(a){for(var b=this._$aS.length-1;0<=b;--b)if(null!=this._$aS[b]&&this._$aS[b].getDrawDataID()==a)return b;return-1};w.prototype.getDrawData=function(a){if(a instanceof sa){if(null==this._$Bo){this._$Bo={};a=this._$aS.length;for(var b=0;b<a;b++){var c=this._$aS[b],g=c.getDrawDataID();null!=g&&(this._$Bo[g]=c)}}return this._$Bo[id]}return a<this._$aS.length?this._$aS[a]:null};w.prototype.release=function(){this._$3S.clear();this._$aS.clear();this._$F2.clear();null!=this._$Bo&&this._$Bo.clear();this._$db.clear();this._$8b.clear();this._$Hr.clear()};w.prototype.init=function(){this._$co++;0<this._$F2.length&&this.release();for(var a=this._$Ri.getModelImpl(),b=a._$Xr(),c=b.length,g=[],f=[],d=0;d<c;++d){var e=b[d];this._$F2.push(e);this._$Hr.push(e.init(this));for(var n=e.getBaseData(),t=n.length,h=0;h<t;++h)g.push(n[h]);for(h=0;h<t;++h){var k=n[h].init(this);k._$l2(d);f.push(k)}e=e.getDrawData();n=e.length;for(h=0;h<n;++h)t=e[h],k=t.init(this),k._$IP=d,this._$aS.push(t),this._$8b.push(k)}b=g.length;for(c=aa._$2o();;){h=!1;for(d=0;d<b;++d)e=g[d],null!=e&&(n=e.getTargetBaseDataID(),(null==n||n==c||0<=this.getBaseDataIndex(n))&&(this._$3S.push(e),this._$db.push(f[d]),g[d]=null,h=!0));if(!h)break}d=a._$E2();if(null!=d&&(a=d._$1s(),null!=a))for(g=a.length,d=0;d<g;++d)f=a[d],null!=f&&this._$02(f.getParamID(),f.getDefaultValue(),f.getMinValue(),f.getMaxValue());this.clipManager=new l(this.dp_webgl);this.clipManager.init(this,this._$aS,this._$8b);this._$QT=!0};w.prototype.update=function(){w._$e&&d.start("_$zL");for(var a=this._$_2.length,b=0;b<a;b++)this._$_2[b]!=this._$vr[b]&&(this._$Js[b]=w._$ZS,this._$vr[b]=this._$_2[b]);var c=this._$3S.length,a=this._$aS.length,g=L._$or(),f=L._$Pr()-g+1;(null==this._$Ws||this._$Ws.length<f)&&(this._$Ws=new Int16Array(f),this._$Vs=new Int16Array(f));for(b=0;b<f;b++)this._$Ws[b]=w._$V2,this._$Vs[b]=w._$V2;(null==this._$Er||this._$Er.length<a)&&(this._$Er=new Int16Array(a));for(b=0;b<a;b++)this._$Er[b]=w._$W0;w._$e&&d.dump("_$zL");w._$e&&d.start("_$UL");b=null;for(f=0;f<c;++f){var e=this._$3S[f],h=this._$db[f];try{e._$Nr(this,h),e._$2b(this,h)}catch(Na){null==b&&(b=Na)}}null!=b&&w._$_0&&d._$Rb(b);w._$e&&d.dump("_$UL");w._$e&&d.start("_$DL");c=null;for(b=0;b<a;++b){f=this._$aS[b];e=this._$8b[b];try{if(f._$Nr(this,e),!e._$u2()){f._$2b(this,e);var n,t=Math.floor(f._$zS(this,e)-g);try{n=this._$Vs[t]}catch(Na){console.log("_$li :: %s / %s \t\t\t\t@@_$fS\n",Na.toString(),f.getDrawDataID().toString());t=Math.floor(f._$zS(this,e)-g);continue}n==w._$V2?this._$Ws[t]=b:this._$Er[n]=b;this._$Vs[t]=b}}catch(Na){null==c&&(c=Na,u._$sT(u._$H7))}}null!=c&&w._$_0&&d._$Rb(c);w._$e&&d.dump("_$DL");w._$e&&d.start("_$eL");for(b=this._$Js.length-1;0<=b;b--)this._$Js[b]=w._$jr;return this._$QT=!1,w._$e&&d.dump("_$eL"),!1};w.prototype.preDraw=function(a){null!=this.clipManager&&(a._$ZT(),this.clipManager.setupClip(this,a))};w.prototype.draw=function(a){if(null==this._$Ws)return void d._$li("call _$Ri.update() before _$Ri.draw() ");var b=this._$Ws.length;a._$ZT();for(var c=0;c<b;++c){var g=this._$Ws[c];if(g!=w._$V2)for(;;){var f=this._$aS[g],e=this._$8b[g];e._$yo()&&(e._$VS=this._$Hr[e._$IP].getPartsOpacity(),f.draw(a,this,e));f=this._$Er[g];if(f<=g||f==w._$W0)break;g=f}}};w.prototype.getParamIndex=function(a){for(var b=this._$pb.length-1;0<=b;--b)if(this._$pb[b]==a)return b;return this._$02(a,0,w._$tr,w._$lr)};w.prototype._$BS=function(a){return this.getBaseDataIndex(a)};w.prototype.getBaseDataIndex=function(a){for(var b=this._$3S.length-1;0<=b;--b)if(null!=this._$3S[b]&&this._$3S[b].getBaseDataID()==a)return b;return-1};w.prototype._$UT=function(a,b){var c=new Float32Array(b);return B._$jT(a,0,c,0,a.length),c};w.prototype._$02=function(a,b,c,g){if(this._$qo>=this._$pb.length){var f=this._$pb.length,d=Array(2*f);B._$jT(this._$pb,0,d,0,f);this._$pb=d;this._$_2=this._$UT(this._$_2,2*f);this._$vr=this._$UT(this._$vr,2*f);this._$Rr=this._$UT(this._$Rr,2*f);this._$Or=this._$UT(this._$Or,2*f);d=[];B._$jT(this._$Js,0,d,0,f);this._$Js=d}return this._$pb[this._$qo]=a,this._$_2[this._$qo]=b,this._$vr[this._$qo]=b,this._$Rr[this._$qo]=c,this._$Or[this._$qo]=g,this._$Js[this._$qo]=w._$ZS,this._$qo++};w.prototype._$Zo=function(a,b){this._$3S[a]=b};w.prototype.setParamFloat=function(a,b){b<this._$Rr[a]&&(b=this._$Rr[a]);b>this._$Or[a]&&(b=this._$Or[a]);this._$_2[a]=b};w.prototype.loadParam=function(){var a=this._$_2.length;a>this._$fs.length&&(a=this._$fs.length);B._$jT(this._$fs,0,this._$_2,0,a)};w.prototype.saveParam=function(){var a=this._$_2.length;a>this._$fs.length&&(this._$fs=new Float32Array(a));B._$jT(this._$_2,0,this._$fs,0,a)};w.prototype._$v2=function(){return this._$co};w.prototype._$WS=function(){return this._$QT};w.prototype._$Xb=function(a){return this._$Js[a]==w._$ZS};w.prototype._$vs=function(){return this._$Es};w.prototype._$Tr=function(){return this._$ZP};w.prototype.getBaseData=function(a){return this._$3S[a]};w.prototype.getParamFloat=function(a){return this._$_2[a]};w.prototype.getParamMax=function(a){return this._$Or[a]};w.prototype.getParamMin=function(a){return this._$Rr[a]};w.prototype.setPartsOpacity=function(a,b){this._$Hr[a].setPartsOpacity(b)};w.prototype.getPartsOpacity=function(a){return this._$Hr[a].getPartsOpacity()};w.prototype.getPartsDataIndex=function(a){for(var b=this._$F2.length-1;0<=b;--b)if(null!=this._$F2[b]&&this._$F2[b]._$p2()==a)return b;return-1};w.prototype._$q2=function(a){return this._$db[a]};w.prototype._$C2=function(a){return this._$8b[a]};w.prototype._$Bb=function(a){return this._$Hr[a]};w.prototype._$5s=function(a,b){for(var c=this._$Ws.length,g=a,f=0;f<c;++f){var d=this._$Ws[f];if(d!=w._$V2)for(;;){var e=this._$8b[d];e._$yo()&&(e._$GT()._$B2(this,e,g),g+=b);e=this._$Er[d];if(e<=d||e==w._$W0)break;d=e}}};w.prototype.setDrawParam=function(a){this.dp_webgl=a};w.prototype.getDrawParam=function(){return this.dp_webgl};La._$0T=function(a){return La._$0T(new _$5(a))};La._$0T=function(a){if(!a.exists())throw new _$ls(a._$3b());for(var b=a.length(),c=new Int8Array(b),g=new _$Xs(new _$kb(a),8192),f=0;0<(a=g.read(c,f,b-f));)f+=a;return c};La._$C=function(a){var b=null,c=null;try{for(var b=a instanceof Array?a:new _$Xs(a,8192),c=new _$js,g,f=new Int8Array(1E3);0<(g=b.read(f));)c.write(f,0,g);return c._$TS()}finally{null!=a&&a.close(),null!=c&&(c.flush(),c.close())}};Oa.prototype._$T2=function(){return B.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)};Oa.prototype._$uo=function(a){this._$Br=a};Oa.prototype._$QS=function(a,b,c){this._$Dr=a;this._$Cb=b;this._$mr=c};Oa.prototype._$7T=function(a){var b;b=B.getUserTimeMSec();var c;switch(this._$_L){case STATE_CLOSING:c=(b-this._$bb)/this._$Dr;1<=c&&(c=1,this._$_L=Ba.STATE_CLOSED,this._$bb=b);b=1-c;break;case STATE_CLOSED:c=(b-this._$bb)/this._$Cb;1<=c&&(this._$_L=Ba.STATE_OPENING,this._$bb=b);b=0;break;case STATE_OPENING:c=(b-this._$bb)/this._$mr;1<=c&&(c=1,this._$_L=Ba.STATE_INTERVAL,this._$12=this._$T2());b=c;break;case STATE_INTERVAL:this._$12<b&&(this._$_L=Ba.STATE_CLOSING,this._$bb=b);b=1;break;default:this._$_L=Ba.STATE_INTERVAL,this._$12=this._$T2(),b=1}this._$jo||(b=-b);a.setParamFloat(this._$iL,b);a.setParamFloat(this._$0L,b)};var Ba=function(){};Ba.STATE_FIRST="STATE_FIRST";Ba.STATE_INTERVAL="STATE_INTERVAL";Ba.STATE_CLOSING="STATE_CLOSING";Ba.STATE_CLOSED="STATE_CLOSED";Ba.STATE_OPENING="STATE_OPENING";U.prototype=new P;U._$As=32;U._$Gr=!1;U._$NT=null;U._$vS=null;U._$no=null;U._$9r=function(a){return new Float32Array(a)};U._$vb=function(a){return new Int16Array(a)};U._$cr=function(a,b){return null==a||a._$yL()<b.length?(a=U._$9r(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};U._$mb=function(a,b){return null==a||a._$yL()<b.length?(a=U._$vb(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};U._$Hs=function(){return U._$Gr};U._$as=function(a){U._$Gr=a};U.prototype.setGL=function(a){this.gl=a};U.prototype.setTransform=function(a){this.transform=a};U.prototype._$ZT=function(){};U.prototype._$Uo=function(a,b,c,g,f,d,e,n){.01>d||this.gl.drawElements(this._$U2[a],c,g,f,d,.9<d?u.EXPAND_W:0,this.transform,n)};U.prototype._$Rs=function(){throw Error("_$Rs");};U.prototype._$Ds=function(a){throw Error("_$Ds");};U.prototype._$K2=function(){for(var a=0;a<this._$sb.length;a++)0!=this._$sb[a]&&(this.gl._$Sr(1,this._$sb,a),this._$sb[a]=0)};U.prototype.setTexture=function(a,b){this._$sb.length<a+1&&this._$nS(a);this._$sb[a]=b};U.prototype.setTexture=function(a,b){this._$sb.length<a+1&&this._$nS(a);this._$U2[a]=b};U.prototype._$nS=function(a){a=new Int32Array(Math.max(2*this._$sb.length,a+1+10));B._$jT(this._$sb,0,a,0,this._$sb.length);this._$sb=a;a=[];B._$jT(this._$U2,0,a,0,this._$U2.length);this._$U2=a};ca.prototype=new C;ca._$Xo=new Float32Array(2);ca._$io=new Float32Array(2);ca._$0o=new Float32Array(2);ca._$Lo=new Float32Array(2);ca._$To=new Float32Array(2);ca._$Po=new Float32Array(2);ca._$gT=[];ca.prototype._$zP=function(){this._$GS=new xa;this._$GS._$zP();this._$Y0=[]};ca.prototype.getType=function(){return C._$c2};ca.prototype._$F0=function(a){C.prototype._$F0.call(this,a);this._$GS=a._$nP();this._$Y0=a._$nP();C.prototype.readV2_opacity.call(this,a)};ca.prototype.init=function(a){a=new Va(this);return a._$Yr=new na,this._$32()&&(a._$Wr=new na),a};ca.prototype._$Nr=function(a,b){this!=b._$GT()&&console.log("### assert!! ### ");if(this._$GS._$Ur(a)){var c=ca._$gT;c[0]=!1;var g=this._$GS._$Q2(a,c);b._$Ib(c[0]);this.interpolateOpacity(a,this._$GS,b,c);var c=a._$vs(),f=a._$Tr();if(this._$GS._$zr(c,f,g),0>=g){var d=this._$Y0[c[0]];b._$Yr.init(d)}else if(1==g){var d=this._$Y0[c[0]],e=this._$Y0[c[1]],n=f[0];b._$Yr._$fL=d._$fL+(e._$fL-d._$fL)*n;b._$Yr._$gL=d._$gL+(e._$gL-d._$gL)*n;b._$Yr._$B0=d._$B0+(e._$B0-d._$B0)*n;b._$Yr._$z0=d._$z0+(e._$z0-d._$z0)*n;b._$Yr._$qT=d._$qT+(e._$qT-d._$qT)*n}else if(2==g){var d=this._$Y0[c[0]],e=this._$Y0[c[1]],h=this._$Y0[c[2]],k=this._$Y0[c[3]],n=f[0],l=f[1],f=d._$fL+(e._$fL-d._$fL)*n,g=h._$fL+(k._$fL-h._$fL)*n;b._$Yr._$fL=f+(g-f)*l;f=d._$gL+(e._$gL-d._$gL)*n;g=h._$gL+(k._$gL-h._$gL)*n;b._$Yr._$gL=f+(g-f)*l;f=d._$B0+(e._$B0-d._$B0)*n;g=h._$B0+(k._$B0-h._$B0)*n;b._$Yr._$B0=f+(g-f)*l;f=d._$z0+(e._$z0-d._$z0)*n;g=h._$z0+(k._$z0-h._$z0)*n;b._$Yr._$z0=f+(g-f)*l;f=d._$qT+(e._$qT-d._$qT)*n;g=h._$qT+(k._$qT-h._$qT)*n;b._$Yr._$qT=f+(g-f)*l}else if(3==g){var k=this._$Y0[c[0]],q=this._$Y0[c[1]],p=this._$Y0[c[2]],u=this._$Y0[c[3]],r=this._$Y0[c[4]],x=this._$Y0[c[5]],w=this._$Y0[c[6]],H=this._$Y0[c[7]],n=f[0],l=f[1],d=f[2],f=k._$fL+(q._$fL-k._$fL)*n,g=p._$fL+(u._$fL-p._$fL)*n,e=r._$fL+(x._$fL-r._$fL)*n,h=w._$fL+(H._$fL-w._$fL)*n;b._$Yr._$fL=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$gL+(q._$gL-k._$gL)*n;g=p._$gL+(u._$gL-p._$gL)*n;e=r._$gL+(x._$gL-r._$gL)*n;h=w._$gL+(H._$gL-w._$gL)*n;b._$Yr._$gL=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$B0+(q._$B0-k._$B0)*n;g=p._$B0+(u._$B0-p._$B0)*n;e=r._$B0+(x._$B0-r._$B0)*n;h=w._$B0+(H._$B0-w._$B0)*n;b._$Yr._$B0=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$z0+(q._$z0-k._$z0)*n;g=p._$z0+(u._$z0-p._$z0)*n;e=r._$z0+(x._$z0-r._$z0)*n;h=w._$z0+(H._$z0-w._$z0)*n;b._$Yr._$z0=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$qT+(q._$qT-k._$qT)*n;g=p._$qT+(u._$qT-p._$qT)*n;e=r._$qT+(x._$qT-r._$qT)*n;h=w._$qT+(H._$qT-w._$qT)*n;b._$Yr._$qT=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l)}else if(4==g){var k=this._$Y0[c[0]],q=this._$Y0[c[1]],p=this._$Y0[c[2]],u=this._$Y0[c[3]],r=this._$Y0[c[4]],x=this._$Y0[c[5]],w=this._$Y0[c[6]],H=this._$Y0[c[7]],A=this._$Y0[c[8]],D=this._$Y0[c[9]],B=this._$Y0[c[10]],z=this._$Y0[c[11]],I=this._$Y0[c[12]],C=this._$Y0[c[13]],ya=this._$Y0[c[14]],G=this._$Y0[c[15]],n=f[0],l=f[1],d=f[2],la=f[3],f=k._$fL+(q._$fL-k._$fL)*n,g=p._$fL+(u._$fL-p._$fL)*n,e=r._$fL+(x._$fL-r._$fL)*n,h=w._$fL+(H._$fL-w._$fL)*n,M=A._$fL+(D._$fL-A._$fL)*n,F=B._$fL+(z._$fL-B._$fL)*n,y=I._$fL+(C._$fL-I._$fL)*n,E=ya._$fL+(G._$fL-ya._$fL)*n;b._$Yr._$fL=(1-la)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+la*((1-d)*(M+(F-M)*l)+d*(y+(E-y)*l));f=k._$gL+(q._$gL-k._$gL)*n;g=p._$gL+(u._$gL-p._$gL)*n;e=r._$gL+(x._$gL-r._$gL)*n;h=w._$gL+(H._$gL-w._$gL)*n;M=A._$gL+(D._$gL-A._$gL)*n;F=B._$gL+(z._$gL-B._$gL)*n;y=I._$gL+(C._$gL-I._$gL)*n;E=ya._$gL+(G._$gL-ya._$gL)*n;b._$Yr._$gL=(1-la)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+la*((1-d)*(M+(F-M)*l)+d*(y+(E-y)*l));f=k._$B0+(q._$B0-k._$B0)*n;g=p._$B0+(u._$B0-p._$B0)*n;e=r._$B0+(x._$B0-r._$B0)*n;h=w._$B0+(H._$B0-w._$B0)*n;M=A._$B0+(D._$B0-A._$B0)*n;F=B._$B0+(z._$B0-B._$B0)*n;y=I._$B0+(C._$B0-I._$B0)*n;E=ya._$B0+(G._$B0-ya._$B0)*n;b._$Yr._$B0=(1-la)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+la*((1-d)*(M+(F-M)*l)+d*(y+(E-y)*l));f=k._$z0+(q._$z0-k._$z0)*n;g=p._$z0+(u._$z0-p._$z0)*n;e=r._$z0+(x._$z0-r._$z0)*n;h=w._$z0+(H._$z0-w._$z0)*n;M=A._$z0+(D._$z0-A._$z0)*n;F=B._$z0+(z._$z0-B._$z0)*n;y=I._$z0+(C._$z0-I._$z0)*n;E=ya._$z0+(G._$z0-ya._$z0)*n;b._$Yr._$z0=(1-la)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+la*((1-d)*(M+(F-M)*l)+d*(y+(E-y)*l));f=k._$qT+(q._$qT-k._$qT)*n;g=p._$qT+(u._$qT-p._$qT)*n;e=r._$qT+(x._$qT-r._$qT)*n;h=w._$qT+(H._$qT-w._$qT)*n;M=A._$qT+(D._$qT-A._$qT)*n;F=B._$qT+(z._$qT-B._$qT)*n;y=I._$qT+(C._$qT-I._$qT)*n;E=ya._$qT+(G._$qT-ya._$qT)*n;b._$Yr._$qT=(1-la)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+la*((1-d)*(M+(F-M)*l)+d*(y+(E-y)*l))}else{n=0|Math.pow(2,g);l=new Float32Array(n);for(d=0;d<n;d++){e=d;h=1;for(k=0;k<g;k++)h*=0==e%2?1-f[k]:f[k],e/=2;l[d]=h}f=[];for(g=0;g<n;g++)f[g]=this._$Y0[c[g]];for(g=q=k=h=e=d=0;g<n;g++)d+=l[g]*f[g]._$fL,e+=l[g]*f[g]._$gL,h+=l[g]*f[g]._$B0,k+=l[g]*f[g]._$z0,q+=l[g]*f[g]._$qT;b._$Yr._$fL=d;b._$Yr._$gL=e;b._$Yr._$B0=h;b._$Yr._$z0=k;b._$Yr._$qT=q}d=this._$Y0[c[0]];b._$Yr.reflectX=d.reflectX;b._$Yr.reflectY=d.reflectY}};ca.prototype._$2b=function(a,b){this!=b._$GT()&&console.log("### assert!! ### ");if(b._$hS(!0),this._$32()){var c=this.getTargetBaseDataID();if(b._$8r==C._$ur&&(b._$8r=a.getBaseDataIndex(c)),0>b._$8r)u._$so&&d._$li("_$L _$0P _$G :: %s",c),b._$hS(!1);else{var g=a.getBaseData(b._$8r);if(null!=g){var c=a._$q2(b._$8r),f=ca._$Xo;f[0]=b._$Yr._$fL;f[1]=b._$Yr._$gL;var e=ca._$io;e[0]=0;e[1]=-.1;c._$GT().getType()==C._$c2?e[1]=-10:e[1]=-.1;var h=ca._$0o;this._$Jr(a,g,c,f,e,h);e=da._$92(e,h);g._$nb(a,c,f,f,1,0,2);b._$Wr._$fL=f[0];b._$Wr._$gL=f[1];b._$Wr._$B0=b._$Yr._$B0;b._$Wr._$z0=b._$Yr._$z0;b._$Wr._$qT=b._$Yr._$qT-e*da._$NS;g=c.getTotalScale();b.setTotalScale_notForClient(g*b._$Wr._$B0);g=c.getTotalOpacity();b.setTotalOpacity(g*b.getInterpolatedOpacity());b._$Wr.reflectX=b._$Yr.reflectX;b._$Wr.reflectY=b._$Yr.reflectY;b._$hS(c._$yo())}else b._$hS(!1)}}else b.setTotalScale_notForClient(b._$Yr._$B0),b.setTotalOpacity(b.getInterpolatedOpacity())};ca.prototype._$nb=function(a,b,c,d,f,e,h){this!=b._$GT()&&console.log("### assert!! ### ");var g,t=null!=b._$Wr?b._$Wr:b._$Yr,k=Math.sin(da._$bS*t._$qT),v=Math.cos(da._$bS*t._$qT),l=b.getTotalScale(),q=t.reflectX?-1:1;g=t.reflectY?-1:1;b=v*l*q;a=-k*l*g;k=k*l*q;v=v*l*g;l=t._$fL;t=t._$gL;f*=h;for(q=e;q<f;q+=h)e=c[q],g=c[q+1],d[q]=b*e+a*g+l,d[q+1]=k*e+v*g+t};ca.prototype._$Jr=function(a,b,c,d,f,e){b!=c._$GT()&&console.log("### assert!! ### ");var g=ca._$Lo;ca._$Lo[0]=d[0];ca._$Lo[1]=d[1];b._$nb(a,c,g,g,1,0,2);for(var h=ca._$To,t=ca._$Po,k=1,l=0;10>l;l++){if(t[0]=d[0]+k*f[0],t[1]=d[1]+k*f[1],b._$nb(a,c,t,h,1,0,2),h[0]-=g[0],h[1]-=g[1],0!=h[0]||0!=h[1])return e[0]=h[0],void(e[1]=h[1]);if(t[0]=d[0]-k*f[0],t[1]=d[1]-k*f[1],b._$nb(a,c,t,h,1,0,2),h[0]-=g[0],h[1]-=g[1],0!=h[0]||0!=h[1])return h[0]=-h[0],h[0]=-h[0],e[0]=h[0],void(e[1]=h[1]);k*=.1}u._$so&&console.log("_$L0 to transform _$SP\n")};Va.prototype=new oa;L.prototype=new E;L._$ur=-2;L._$ES=500;L._$wb=2;L._$8S=3;L._$os=4;L._$52=L._$ES;L._$R2=L._$ES;L._$Sb=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b];c<L._$52?L._$52=c:c>L._$R2&&(L._$R2=c)}};L._$or=function(){return L._$52};L._$Pr=function(){return L._$R2};L.prototype._$F0=function(a){this._$gP=a._$nP();this._$dr=a._$nP();this._$GS=a._$nP();this._$qb=a._$6L();this._$Lb=a._$cS();this._$mS=a._$Tb();a.getFormatVersion()>=Z._$T7?(this.clipID=a._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null;L._$Sb(this._$Lb)};L.prototype.getClipIDList=function(){return this.clipIDList};L.prototype._$Nr=function(a,b){if((b._$IS[0]=!1,b._$Us=va._$Z2(a,this._$GS,b._$IS,this._$Lb),u._$Zs)||!b._$IS[0])b._$7s=va._$br(a,this._$GS,b._$IS,this._$mS)};L.prototype._$2b=function(a){};L.prototype.getDrawDataID=function(){return this._$gP};L.prototype._$j2=function(a){this._$gP=a};L.prototype.getOpacity=function(a,b){return b._$7s};L.prototype._$zS=function(a,b){return b._$Us};L.prototype.getTargetBaseDataID=function(){return this._$dr};L.prototype._$gs=function(a){this._$dr=a};L.prototype._$32=function(){return null!=this._$dr&&this._$dr!=aa._$2o()};L.prototype.getType=function(){};Ga._$42=0;Ga.prototype._$1b=function(){return this._$3S};Ga.prototype.getDrawDataList=function(){return this._$aS};Ga.prototype._$F0=function(a){this._$NL=a._$nP();this._$aS=a._$nP();this._$3S=a._$nP()};Ga.prototype._$kr=function(a){a._$Zo(this._$3S);a._$xo(this._$aS);this._$aS=this._$3S=null};ma.prototype=new e;ma.loadModel=function(a){var b=new ma;return e._$62(b,a),b};ma.loadModel=function(a){var b=new ma;return e._$62(b,a),b};ma._$to=function(){return new ma};ma._$er=function(a){var b=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==b.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+b._$PL());for(var c=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],b=ma.loadModel(b._$3b()),d=0;d<c.length;d++){var f=new _$5(c[d]);if(0==f.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());b.setTexture(d,_$nL._$_o(a,f._$3b()))}return b};ma.prototype.setGL=function(a){this._$zo.setGL(a)};ma.prototype.setTransform=function(a){this._$zo.setTransform(a)};ma.prototype.draw=function(){this._$5S.draw(this._$zo)};ma.prototype._$K2=function(){this._$zo._$K2()};ma.prototype.setTexture=function(a,b){null==this._$zo&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this._$zo.setTexture(a,b)};ma.prototype.setTexture=function(a,b){null==this._$zo&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this._$zo.setTexture(a,b)};ma.prototype._$Rs=function(){return this._$zo._$Rs()};ma.prototype._$Ds=function(a){this._$zo._$Ds(a)};ma.prototype.getDrawParam=function(){return this._$zo};W.prototype=new h;W._$cs="VISIBLE:";W._$ar="LAYOUT:";W.MTN_PREFIX_FADEIN="FADEIN:";W.MTN_PREFIX_FADEOUT="FADEOUT:";W._$Co=0;W._$1T=1;W.loadMotion=function(a){a=La._$C(a);return W.loadMotion(a)};W.loadMotion=function(a){a instanceof ArrayBuffer&&(a=new DataView(a));for(var b=new W,c=[0],d=a.byteLength,f=b._$yT=0;f<d;++f){var e=Aa(a,f),h=e.charCodeAt(0);if("\n"!=e&&"\r"!=e)if("#"!=e)if("$"!=e){if(97<=h&&122>=h||65<=h&&90>=h||"_"==e){for(var n=f,t=-1;f<d&&"\r"!=(e=Aa(a,f))&&"\n"!=e;++f)if("\x3d"==e){t=f;break}if(0<=t){h=new O;T.startsWith(a,n,W._$cs)?(h._$RP=O._$hs,h._$4P=T.createString(a,n,t-n)):T.startsWith(a,n,W._$ar)?(h._$4P=T.createString(a,n+7,t-n-7),T.startsWith(a,n+7,"ANCHOR_X")?h._$RP=O._$xs:T.startsWith(a,n+7,"ANCHOR_Y")?h._$RP=O._$us:T.startsWith(a,n+7,"SCALE_X")?h._$RP=O._$qs:T.startsWith(a,n+7,"SCALE_Y")?h._$RP=O._$Ys:T.startsWith(a,n+7,"X")?h._$RP=O._$ws:T.startsWith(a,n+7,"Y")&&(h._$RP=O._$Ns)):(h._$RP=O._$Fr,h._$4P=T.createString(a,n,t-n));b.motions.push(h);for(var n=0,k=[],f=t+1;f<d&&"\r"!=(e=Aa(a,f))&&"\n"!=e;++f)if(","!=e&&" "!=e&&"\t"!=e&&(t=T._$LS(a,d,f,c),0<c[0])){k.push(t);n++;t=c[0];if(t<f){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}f=t-1}h._$I0=new Float32Array(k);n>b._$yT&&(b._$yT=n)}}}else{n=f;for(t=-1;f<d&&"\r"!=(e=Aa(a,f))&&"\n"!=e;++f)if("\x3d"==e){t=f;break}h=!1;if(0<=t)for(t==n+4&&"f"==Aa(a,n+1)&&"p"==Aa(a,n+2)&&"s"==Aa(a,n+3)&&(h=!0),f=t+1;f<d&&"\r"!=(e=Aa(a,f))&&"\n"!=e;++f)","!=e&&" "!=e&&"\t"!=e&&(t=T._$LS(a,d,f,c),0<c[0]&&h&&5<t&&121>t&&(b._$D0=t),f=c[0]);for(;f<d&&"\n"!=Aa(a,f)&&"\r"!=Aa(a,f);++f);}else for(;f<d&&"\n"!=Aa(a,f)&&"\r"!=Aa(a,f);++f);}return b._$rr=1E3*b._$yT/b._$D0|0,b};W.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr};W.prototype.getLoopDurationMSec=function(){return this._$rr};W.prototype.dump=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];console.log("_$wL[%s] [%d]. ",b._$4P,b._$I0.length);for(var c=0;c<b._$I0.length&&10>c;c++)console.log("%5.2f ,",b._$I0[c]);console.log("\n")}};W.prototype.updateParamExe=function(a,b,c,d){for(var f=(b-d._$z2)*this._$D0/1E3,g=0|f,f=f-g,e=0;e<this.motions.length;e++){var h=this.motions[e],k=h._$I0.length,l=h._$4P;if(h._$RP==O._$hs)a.setParamFloat(l,h._$I0[g>=k?k-1:g]);else if(!(O._$ws<=h._$RP&&h._$RP<=O._$Ys)){var q=a.getParamIndex(l),p=a.getModelContext(),r=p.getParamMax(q),u=p.getParamMin(q),r=.4*(r-u),q=p.getParamFloat(q),p=h._$I0[g>=k?k-1:g],h=h._$I0[g+1>=k?k-1:g+1];a.setParamFloat(l,q+((p<h&&h-p>r||p>h&&p-h>r?p:p+(h-p)*f)-q)*c)}}g>=this._$yT&&(this._$E?(d._$z2=b,this.loopFadeIn&&(d._$bs=b)):d._$9L=!0);this._$eP=c};W.prototype._$r0=function(){return this._$E};W.prototype._$aL=function(a){this._$E=a};W.prototype._$S0=function(){return this._$D0};W.prototype._$U0=function(a){this._$D0=a};W.prototype.isLoopFadeIn=function(){return this.loopFadeIn};W.prototype.setLoopFadeIn=function(a){this.loopFadeIn=a};Fa.prototype.clear=function(){this.size=0};Fa.prototype.add=function(a){if(this._$P.length<=this.size){var b=new Float32Array(2*this.size);B._$jT(this._$P,0,b,0,this.size);this._$P=b}this._$P[this.size++]=a};Fa.prototype._$BL=function(){var a=new Float32Array(this.size);return B._$jT(this._$P,0,a,0,this.size),a};O._$Fr=0;O._$hs=1;O._$ws=100;O._$Ns=101;O._$xs=102;O._$us=103;O._$qs=104;O._$Ys=105;ta.prototype=new C;ta._$gT=[];ta.prototype._$zP=function(){this._$GS=new xa;this._$GS._$zP()};ta.prototype._$F0=function(a){C.prototype._$F0.call(this,a);this._$A=a._$6L();this._$o=a._$6L();this._$GS=a._$nP();this._$Eo=a._$nP();C.prototype.readV2_opacity.call(this,a)};ta.prototype.init=function(a){a=new Wa(this);var b=(this._$o+1)*(this._$A+1);return null!=a._$Cr&&(a._$Cr=null),a._$Cr=new Float32Array(2*b),null!=a._$hr&&(a._$hr=null),this._$32()?a._$hr=new Float32Array(2*b):a._$hr=null,a};ta.prototype._$Nr=function(a,b){if(this._$GS._$Ur(a)){var c=this._$VT(),d=ta._$gT;d[0]=!1;va._$Vr(a,this._$GS,d,c,this._$Eo,b._$Cr,0,2);b._$Ib(d[0]);this.interpolateOpacity(a,this._$GS,b,d)}};ta.prototype._$2b=function(a,b){if(b._$hS(!0),this._$32()){var c=this.getTargetBaseDataID();if(b._$8r==C._$ur&&(b._$8r=a.getBaseDataIndex(c)),0>b._$8r)u._$so&&d._$li("_$L _$0P _$G :: %s",c),b._$hS(!1);else{var c=a.getBaseData(b._$8r),g=a._$q2(b._$8r);if(null!=c&&g._$yo()){var f=g.getTotalScale();b.setTotalScale_notForClient(f);f=g.getTotalOpacity();b.setTotalOpacity(f*b.getInterpolatedOpacity());c._$nb(a,g,b._$Cr,b._$hr,this._$VT(),0,2);b._$hS(!0)}else b._$hS(!1)}}else b.setTotalOpacity(b.getInterpolatedOpacity())};ta.prototype._$nb=function(a,b,c,d,f,e,h){ta.transformPoints_sdk2(c,d,f,e,h,null!=b._$hr?b._$hr:b._$Cr,this._$o,this._$A)};ta.transformPoints_sdk2=function(a,b,c,d,f,e,h,k){var g,n,l;c*=f;for(var q=0,v=0,r=0,u=0,x=0,w=0,H=!1;d<c;d+=f){var A,K,B,D;if(B=a[d],D=a[d+1],A=B*h,K=D*k,0>A||0>K||h<=A||k<=K)if(g=h+1,H||(H=!0,q=.25*(e[2*(0+0*g)]+e[2*(h+0*g)]+e[2*(0+k*g)]+e[2*(h+k*g)]),v=.25*(e[2*(0+0*g)+1]+e[2*(h+0*g)+1]+e[2*(0+k*g)+1]+e[2*(h+k*g)+1]),x=e[2*(h+k*g)]-e[2*(0+0*g)],w=e[2*(h+k*g)+1]-e[2*(0+0*g)+1],l=e[2*(h+0*g)]-e[2*(0+k*g)],n=e[2*(h+0*g)+1]-e[2*(0+k*g)+1],r=.5*(x+l),u=.5*(w+n),x=.5*(x-l),w=.5*(w-n),q-=.5*(r+x),v-=.5*(u+w)),-2<B&&3>B&&-2<D&&3>D)if(0>=B){if(0>=D){n=e[2*(0+0*g)];g=e[2*(0+0*g)+1];l=q-2*r;var y=v-2*u,I=q-2*x,z=v-2*w,F=q-2*r-2*x,E=v-2*u-2*w,M=.5*(B- -2),C=.5*(D- -2)}else if(1<=D)I=e[2*(0+k*g)],z=e[2*(0+k*g)+1],F=q-2*r+1*x,E=v-2*u+1*w,n=q+3*x,g=v+3*w,l=q-2*r+3*x,y=v-2*u+3*w,M=.5*(B- -2),C=.5*(D-1);else{y=0|K;y==k&&(y=k-1);var M=.5*(B- -2),C=K-y,G=y/k,J=(y+1)/k,I=e[2*(0+y*g)],z=e[2*(0+y*g)+1];n=e[2*(0+(y+1)*g)];g=e[2*(0+(y+1)*g)+1];F=q-2*r+G*x;E=v-2*u+G*w;l=q-2*r+J*x;y=v-2*u+J*w}1>=M+C?(b[d]=F+(I-F)*M+(l-F)*C,b[d+1]=E+(z-E)*M+(y-E)*C):(b[d]=n+(l-n)*(1-M)+(I-n)*(1-C),b[d+1]=g+(y-g)*(1-M)+(z-g)*(1-C))}else 1<=B?(0>=D?(l=e[2*(h+0*g)],y=e[2*(h+0*g)+1],n=q+3*r,g=v+3*u,F=q+1*r-2*x,E=v+1*u-2*w,I=q+3*r-2*x,z=v+3*u-2*w,M=.5*(B-1),C=.5*(D- -2)):1<=D?(F=e[2*(h+k*g)],E=e[2*(h+k*g)+1],I=q+3*r+1*x,z=v+3*u+1*w,l=q+1*r+3*x,y=v+1*u+3*w,n=q+3*r+3*x,g=v+3*u+3*w,M=.5*(B-1),C=.5*(D-1)):(y=0|K,y==k&&(y=k-1),M=.5*(B-1),C=K-y,G=y/k,J=(y+1)/k,F=e[2*(h+y*g)],E=e[2*(h+y*g)+1],l=e[2*(h+(y+1)*g)],y=e[2*(h+(y+1)*g)+1],I=q+3*r+G*x,z=v+3*u+G*w,n=q+3*r+J*x,g=v+3*u+J*w),1>=M+C?(b[d]=F+(I-F)*M+(l-F)*C,b[d+1]=E+(z-E)*M+(y-E)*C):(b[d]=n+(l-n)*(1-M)+(I-n)*(1-C),b[d+1]=g+(y-g)*(1-M)+(z-g)*(1-C))):0>=D?(z=0|A,z==h&&(z=h-1),M=A-z,C=.5*(D- -2),G=z/h,J=(z+1)/h,l=e[2*(z+0*g)],y=e[2*(z+0*g)+1],n=e[2*(z+1+0*g)],g=e[2*(z+1+0*g)+1],F=q+G*r-2*x,E=v+G*u-2*w,I=q+J*r-2*x,z=v+J*u-2*w,1>=M+C?(b[d]=F+(I-F)*M+(l-F)*C,b[d+1]=E+(z-E)*M+(y-E)*C):(b[d]=n+(l-n)*(1-M)+(I-n)*(1-C),b[d+1]=g+(y-g)*(1-M)+(z-g)*(1-C))):1<=D?(z=0|A,z==h&&(z=h-1),M=A-z,C=.5*(D-1),G=z/h,J=(z+1)/h,F=e[2*(z+k*g)],E=e[2*(z+k*g)+1],I=e[2*(z+1+k*g)],z=e[2*(z+1+k*g)+1],l=q+G*r+3*x,y=v+G*u+3*w,n=q+J*r+3*x,g=v+J*u+3*w,1>=M+C?(b[d]=F+(I-F)*M+(l-F)*C,b[d+1]=E+(z-E)*M+(y-E)*C):(b[d]=n+(l-n)*(1-M)+(I-n)*(1-C),b[d+1]=g+(y-g)*(1-M)+(z-g)*(1-C))):p.err.printf("_$li calc : %.4f , %.4f\t\t\t\t\t@@BDBoxGrid\n",B,D);else b[d]=q+B*r+D*x,b[d+1]=v+B*u+D*w;else n=A-(0|A),l=K-(0|K),g=2*((0|A)+(0|K)*(h+1)),1>n+l?(b[d]=e[g]*(1-n-l)+e[g+2]*n+e[g+2*(h+1)]*l,b[d+1]=e[g+1]*(1-n-l)+e[g+3]*n+e[g+2*(h+1)+1]*l):(b[d]=e[g+2*(h+1)+2]*(n-1+l)+e[g+2*(h+1)]*(1-n)+e[g+2]*(1-l),b[d+1]=e[g+2*(h+1)+3]*(n-1+l)+e[g+2*(h+1)+1]*(1-n)+e[g+3]*(1-l))}};ta.prototype.transformPoints_sdk1=function(a,b,c,d,f,e,h){var g,k,l,q,p,v,r;a=this._$o;var x=this._$A;f*=h;for(b=null!=b._$hr?b._$hr:b._$Cr;e<f;e+=h)u._$ts?(g=c[e],k=c[e+1],0>g?g=0:1<g&&(g=1),0>k?k=0:1<k&&(k=1),g*=a,k*=x,l=0|g,q=0|k,l>a-1&&(l=a-1),q>x-1&&(q=x-1),v=g-l,r=k-q,p=2*(l+q*(a+1))):(g=c[e]*a,k=c[e+1]*x,v=g-(0|g),r=k-(0|k),p=2*((0|g)+(0|k)*(a+1))),1>v+r?(d[e]=b[p]*(1-v-r)+b[p+2]*v+b[p+2*(a+1)]*r,d[e+1]=b[p+1]*(1-v-r)+b[p+3]*v+b[p+2*(a+1)+1]*r):(d[e]=b[p+2*(a+1)+2]*(v-1+r)+b[p+2*(a+1)]*(1-v)+b[p+2]*(1-r),d[e+1]=b[p+2*(a+1)+3]*(v-1+r)+b[p+2*(a+1)+1]*(1-v)+b[p+3]*(1-r))};ta.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)};ta.prototype.getType=function(){return C._$_b};Wa.prototype=new oa;ka._$42=0;ka.prototype._$zP=function(){this._$3S=[];this._$aS=[]};ka.prototype._$F0=function(a){this._$g0=a._$8L();this.visible=a._$8L();this._$NL=a._$nP();this._$3S=a._$nP();this._$aS=a._$nP()};ka.prototype.init=function(a){a=new Pa(this);return a.setPartsOpacity(this.isVisible()?1:0),a};ka.prototype._$6o=function(a){if(null==this._$3S)throw Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(a)};ka.prototype._$3o=function(a){if(null==this._$aS)throw Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(a)};ka.prototype._$Zo=function(a){this._$3S=a};ka.prototype._$xo=function(a){this._$aS=a};ka.prototype.isVisible=function(){return this.visible};ka.prototype._$uL=function(){return this._$g0};ka.prototype._$KP=function(a){this.visible=a};ka.prototype._$ET=function(a){this._$g0=a};ka.prototype.getBaseData=function(){return this._$3S};ka.prototype.getDrawData=function(){return this._$aS};ka.prototype._$p2=function(){return this._$NL};ka.prototype._$ob=function(a){this._$NL=a};ka.prototype.getPartsID=function(){return this._$NL};ka.prototype._$MP=function(a){this._$NL=a};Pa.prototype=new function(){};Pa.prototype.getPartsOpacity=function(){return this._$VS};Pa.prototype.setPartsOpacity=function(a){this._$VS=a};Da._$L7=function(){A._$27();aa._$27();sa._$27();I._$27()};Da.prototype.toString=function(){return this.id};Ha.prototype._$1s=function(){return this._$4S};Ha.prototype._$zP=function(){this._$4S=[]};Ha.prototype._$F0=function(a){this._$4S=a._$nP()};Ha.prototype._$Ks=function(a){this._$4S.push(a)};fa.tr=new ra;fa._$50=new ra;fa._$Ti=[0,0];fa._$Pi=[0,0];fa._$B=[0,0];fa.prototype._$lP=function(a,b,c,d){this.viewport=[a,b,c,d]};fa.prototype._$bL=function(){this.context.save();var a=this.viewport;null!=a&&(this.context.beginPath(),this.context._$Li(a[0],a[1],a[2],a[3]),this.context.clip())};fa.prototype._$ei=function(){this.context.restore()};fa.prototype.drawElements=function(a,b,c,g,f,e,h,k){try{f!=this._$Qo&&(this._$Qo=f,this.context.globalAlpha=f);var l=b.length,n=a.width,q=a.height,p=this.context,v=this._$xP,r=this._$uP,x=this._$6r,w=this._$3r,H=fa.tr,y=fa._$Ti,z=fa._$Pi,A=fa._$B;for(f=0;f<l;f+=3){p.save();var D=b[f],B=b[f+1],C=b[f+2],I=v+x*c[2*D],F=r+w*c[2*D+1],E=v+x*c[2*B],K=r+w*c[2*B+1],G=v+x*c[2*C],J=r+w*c[2*C+1];h&&(h._$PS(I,F,A),I=A[0],F=A[1],h._$PS(E,K,A),E=A[0],K=A[1],h._$PS(G,J,A),G=A[0],J=A[1]);var L=n*g[2*D],ba=q-q*g[2*D+1],N=n*g[2*B],O=q-q*g[2*B+1],P=n*g[2*C],Q=q-q*g[2*C+1],S=Math.atan2(O-ba,N-L),U=Math.atan2(K-F,E-I),R=E-I,T=K-F,V=Math.sqrt(R*R+T*T),R=N-L,T=O-ba,Z=V/Math.sqrt(R*R+T*T);Ua._$ni(P,Q,L,ba,N-L,O-ba,-(O-ba),N-L,y);Ua._$ni(G,J,I,F,E-I,K-F,-(K-F),E-I,z);var ca=(z[0]-y[0])/y[1],W=Math.min(L,N,P),Y=Math.max(L,N,P),X=Math.min(ba,O,Q),aa=Math.max(ba,O,Q),da=Math.floor(W),ea=Math.floor(X),ga=Math.ceil(Y),ja=Math.ceil(aa);H.identity();H.translate(I,F);H.rotate(U);H.scale(1,z[1]/y[1]);H.shear(ca,0);H.scale(Z,Z);H.rotate(-S);H.translate(-L,-ba);H.setContext(p);if(e||(e=1.2),u.IGNORE_EXPAND&&(e=0),u.USE_CACHED_POLYGON_IMAGE){var ha=k._$e0;if(ha.gl_cacheImage=ha.gl_cacheImage||{},!ha.gl_cacheImage[f]){var ka=fa.createCanvas(ga-da,ja-ea);u.DEBUG_DATA.LDGL_CANVAS_MB=u.DEBUG_DATA.LDGL_CANVAS_MB||0;u.DEBUG_DATA.LDGL_CANVAS_MB+=(ga-da)*(ja-ea)*4;var ia=ka.getContext("2d");ia.translate(-da,-ea);fa.clip(ia,H,e,V,L,ba,N,O,P,Q,I,F,E,K,G,J);ia.drawImage(a,0,0);ha.gl_cacheImage[f]={cacheCanvas:ka,cacheContext:ia}}p.drawImage(ha.gl_cacheImage[f].cacheCanvas,da,ea)}else u.IGNORE_CLIP||fa.clip(p,H,e,V,L,ba,N,O,P,Q,I,F,E,K,G,J),u.USE_ADJUST_TRANSLATION&&(W=0,Y=n,X=0,aa=q),p.drawImage(a,W,X,Y-W,aa-X,W,X,Y-W,aa-X);p.restore()}}catch($a){d._$Rb($a)}};fa.clip=function(a,b,c,d,f,e,h,k,l,q,p,r,u,x,w,H){.02<c?fa.expandClip(a,b,c,d,p,r,u,x,w,H):fa.clipWithTransform(a,null,f,e,h,k,l,q)};fa.expandClip=function(a,b,c,d,f,e,h,k,l,q){var g=h-f,n=k-e,p=l-f,t=q-e;c=0<g*t-n*p?c:-c;var v=-n,r=l-h,n=q-k,u=-n,x=Math.sqrt(r*r+n*n),w=-t,H=Math.sqrt(p*p+t*t),t=f-c*v/d,n=e-c*g/d,v=h-c*v/d;d=k-c*g/d;h-=c*u/x;k-=c*r/x;u=l-c*u/x;r=q-c*r/x;f+=c*w/H;e+=c*p/H;l+=c*w/H;q+=c*p/H;p=fa._$50;return null!=b._$P2(p)&&(fa.clipWithTransform(a,p,t,n,v,d,h,k,u,r,l,q,f,e),!0)};fa.clipWithTransform=function(a,b,c,g,f,e,h,k){if(7>arguments.length)return void d._$li("err : @LDGL.clip()");if(!(arguments[1]instanceof ra))return void d._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");var l=fa._$B,n=b,q=arguments;if(a.beginPath(),n){n._$PS(q[2],q[3],l);a.moveTo(l[0],l[1]);for(var p=4;p<q.length;p+=2)n._$PS(q[p],q[p+1],l),a.lineTo(l[0],l[1])}else for(a.moveTo(q[2],q[3]),p=4;p<q.length;p+=2)a.lineTo(q[p],q[p+1]);a.clip()};fa.createCanvas=function(a,b){var c=document.createElement("canvas");return c.setAttribute("width",a),c.setAttribute("height",b),c||d._$li("err : "+c),c};fa.dumpValues=function(){for(var a="",b=0;b<arguments.length;b++)a+="["+b+"]\x3d "+arguments[b].toFixed(3)+" , ";console.log(a)};Ia.prototype._$F0=function(a){this._$TT=a._$_T();this._$LT=a._$_T();this._$FS=a._$_T();this._$wL=a._$nP()};Ia.prototype.getMinValue=function(){return this._$TT};Ia.prototype.getMaxValue=function(){return this._$LT};Ia.prototype.getDefaultValue=function(){return this._$FS};Ia.prototype.getParamID=function(){return this._$wL};oa.prototype._$yo=function(){return this._$AT&&!this._$JS};oa.prototype._$hS=function(a){this._$AT=a};oa.prototype._$GT=function(){return this._$e0};oa.prototype._$l2=function(a){this._$IP=a};oa.prototype.getPartsIndex=function(){return this._$IP};oa.prototype._$x2=function(){return this._$JS};oa.prototype._$Ib=function(a){this._$JS=a};oa.prototype.getTotalScale=function(){return this.totalScale};oa.prototype.setTotalScale_notForClient=function(a){this.totalScale=a};oa.prototype.getInterpolatedOpacity=function(){return this._$7s};oa.prototype.setInterpolatedOpacity=function(a){this._$7s=a};oa.prototype.getTotalOpacity=function(a){return this.totalOpacity};oa.prototype.setTotalOpacity=function(a){this.totalOpacity=a};u._$2s="2.1.00_1";u._$Kr=201001E3;u._$sP=!0;u._$so=!0;u._$cb=!1;u._$3T=!0;u._$Ts=!0;u._$fb=!0;u._$ts=!0;u.L2D_DEFORMER_EXTEND=!0;u._$Wb=!1;u._$yr=!1;u._$Zs=!1;u.L2D_NO_ERROR=0;u._$i7=1E3;u._$9s=1001;u._$es=1100;u._$r7=2E3;u._$07=2001;u._$b7=2002;u._$H7=4E3;u.L2D_COLOR_BLEND_MODE_MULT=0;u.L2D_COLOR_BLEND_MODE_ADD=1;u.L2D_COLOR_BLEND_MODE_INTERPOLATE=2;u._$6b=!0;u._$cT=0;u.clippingMaskBufferSize=256;u.glContext=[];u.frameBuffers=[];u.fTexture=[];u.IGNORE_CLIP=!1;u.IGNORE_EXPAND=!1;u.EXPAND_W=2;u.USE_ADJUST_TRANSLATION=!0;u.USE_CANVAS_TRANSFORM=!0;u.USE_CACHED_POLYGON_IMAGE=!1;u.DEBUG_DATA={};u.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4};u.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};u.PROFILE_IOS_DEFAULT=u.PROFILE_IOS_QUALITY;u.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};u.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};u.initProfile=function(){V.isIOS()?u.setupProfile(u.PROFILE_IOS_DEFAULT):V.isAndroid()?u.setupProfile(u.PROFILE_ANDROID):u.setupProfile(u.PROFILE_DESKTOP)};u.setupProfile=function(a,b){if("number"==typeof a)switch(a){case 9901:a=u.PROFILE_IOS_SPEED;break;case 9902:a=u.PROFILE_IOS_QUALITY;break;case 9903:a=u.PROFILE_IOS_DEFAULT;break;case 9904:a=u.PROFILE_ANDROID;break;case 9905:a=u.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+a)}2>arguments.length&&(b=!0);b&&console.log("profile : "+a.PROFILE_NAME);for(var c in a)u[c]=a[c],b&&console.log("  ["+c+"] \x3d "+a[c])};u.init=function(){u._$6b&&(console.log("Live2D %s",u._$2s),u._$6b=!1,!0,u.initProfile())};u.getVersionStr=function(){return u._$2s};u.getVersionNo=function(){return u._$Kr};u._$sT=function(a){u._$cT=a};u.getError=function(){var a=u._$cT;return u._$cT=0,a};u.dispose=function(){u.glContext=[];u.frameBuffers=[];u.fTexture=[]};u.setGL=function(a,b){u.glContext[b||0]=a};u.getGL=function(a){return u.glContext[a]};u.setClippingMaskBufferSize=function(a){u.clippingMaskBufferSize=a};u.getClippingMaskBufferSize=function(){return u.clippingMaskBufferSize};u.deleteBuffer=function(a){u.getGL(a).deleteFramebuffer(u.frameBuffers[a].framebuffer);delete u.frameBuffers[a];delete u.glContext[a]};Ra._$r2=function(a){return 0>a?0:1<a?1:.5-.5*Math.cos(a*da.PI_F)};Ca._$fr=-1;Ca.prototype.toString=function(){return this._$ib};R.prototype=new L;R._$42=0;R._$Os=30;R._$ms=0;R._$ns=1;R._$_s=2;R._$gT=[];R.prototype._$_S=function(a){this._$LP=a};R.prototype.getTextureNo=function(){return this._$LP};R.prototype._$ZL=function(){return this._$Qi};R.prototype._$H2=function(){return this._$JP};R.prototype.getNumPoints=function(){return this._$d0};R.prototype.getType=function(){return L._$wb};R.prototype._$B2=function(a,b,c){a=null!=b._$hr?b._$hr:b._$Cr;switch(Q._$do){default:case Q._$Ms:throw Error("_$L _$ro ");case Q._$Qs:for(b=this._$d0-1;0<=b;--b)a[b*Q._$No+4]=c}};R.prototype._$zP=function(){this._$GS=new xa;this._$GS._$zP()};R.prototype._$F0=function(a){L.prototype._$F0.call(this,a);this._$LP=a._$6L();this._$d0=a._$6L();this._$Yo=a._$6L();var b=a._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var c=3*this._$Yo-1;0<=c;--c)this._$BP[c]=b[c];if(this._$Eo=a._$nP(),this._$Qi=a._$nP(),a.getFormatVersion()>=Z._$s7){if(this._$JP=a._$6L(),0!=this._$JP)0!=(1&this._$JP)&&(a=a._$6L(),null==this._$5P&&(this._$5P={}),this._$5P._$Hb=parseInt(a)),0!=(this._$JP&R._$Os)?this._$6s=(this._$JP&R._$Os)>>1:this._$6s=R._$ms,0!=(32&this._$JP)&&(this.culling=!1)}else this._$JP=0};R.prototype.init=function(a){a=new Qa(this);var b=this._$d0*Q._$No,c=this._$32();switch(null!=a._$Cr&&(a._$Cr=null),a._$Cr=new Float32Array(b),null!=a._$hr&&(a._$hr=null),a._$hr=c?new Float32Array(b):null,Q._$do){default:case Q._$Ms:if(Q._$Ls)for(b=this._$d0-1;0<=b;--b){var d=b<<1;this._$Qi[d+1]=1-this._$Qi[d+1]}break;case Q._$Qs:for(b=this._$d0-1;0<=b;--b){var d=b<<1,f=b*Q._$No,e=this._$Qi[d],d=this._$Qi[d+1];a._$Cr[f]=e;a._$Cr[f+1]=d;a._$Cr[f+4]=0;c&&(a._$hr[f]=e,a._$hr[f+1]=d,a._$hr[f+4]=0)}}return a};R.prototype._$Nr=function(a,b){if(this!=b._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(a)&&(L.prototype._$Nr.call(this,a,b),!b._$IS[0])){var c=R._$gT;c[0]=!1;va._$Vr(a,this._$GS,c,this._$d0,this._$Eo,b._$Cr,Q._$i2,Q._$No)}};R.prototype._$2b=function(a,b){try{this!=b._$GT()&&console.log("### assert!! ### ");var c=!1;b._$IS[0]&&(c=!0);if(!c&&(L.prototype._$2b.call(this,a),this._$32())){var g=this.getTargetBaseDataID();if(b._$8r==L._$ur&&(b._$8r=a.getBaseDataIndex(g)),0>b._$8r)u._$so&&d._$li("_$L _$0P _$G :: %s",g);else{var f=a.getBaseData(b._$8r),e=a._$q2(b._$8r);null==f||e._$x2()?b._$AT=!1:(f._$nb(a,e,b._$Cr,b._$hr,this._$d0,Q._$i2,Q._$No),b._$AT=!0);b.baseOpacity=e.getTotalOpacity()}}}catch(K){throw K;}};R.prototype.draw=function(a,b,c){if(this!=c._$GT()&&console.log("### assert!! ### "),!c._$IS[0]){var d=this._$LP;0>d&&(d=1);b=this.getOpacity(b,c)*c._$VS*c.baseOpacity;var f=null!=c._$hr?c._$hr:c._$Cr;a.setClipBufPre_clipContextForDraw(c.clipBufPre_clipContext);a._$WP(this.culling);a._$Uo(d,3*this._$Yo,this._$BP,f,this._$Qi,b,this._$6s,c)}};R.prototype.dump=function(){console.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \n",this._$LP,this._$d0,this._$Yo);console.log("  _$Oi _$di \x3d { ");for(var a=0;a<this._$BP.length;a++)console.log("%5d ,",this._$BP[a]);console.log("\n  _$5i _$30");for(a=0;a<this._$Eo.length;a++){console.log("\n    _$30[%d] \x3d ",a);for(var b=this._$Eo[a],c=0;c<b.length;c++)console.log("%6.2f, ",b[c])}console.log("\n")};R.prototype._$72=function(a){return null==this._$5P?null:this._$5P[a]};R.prototype.getIndexArray=function(){return this._$BP};Qa.prototype=new Ma;Qa.prototype.getTransformedPoints=function(){return null!=this._$hr?this._$hr:this._$Cr};Sa.prototype._$HT=function(a){this.x=a.x;this.y=a.y};Sa.prototype._$HT=function(a,b){this.x=a;this.y=b};Y.prototype=new e;Y.loadModel=function(a){var b=new Y;return e._$62(b,a),b};Y.loadModel=function(a,b){var c=new Y(b||0);return e._$62(c,a),c};Y._$to=function(){return new Y};Y._$er=function(a){var b=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==b.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+b._$PL());for(var c=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],b=Y.loadModel(b._$3b()),d=0;d<c.length;d++){var f=new _$5(c[d]);if(0==f.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());b.setTexture(d,_$nL._$_o(a,f._$3b()))}return b};Y.prototype.setGL=function(a){u.setGL(a)};Y.prototype.setTransform=function(a){this.drawParamWebGL.setTransform(a)};Y.prototype.update=function(){this._$5S.update();this._$5S.preDraw(this.drawParamWebGL)};Y.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)};Y.prototype._$K2=function(){this.drawParamWebGL._$K2()};Y.prototype.setTexture=function(a,b){null==this.drawParamWebGL&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.drawParamWebGL.setTexture(a,b)};Y.prototype.setTexture=function(a,b){null==this.drawParamWebGL&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.drawParamWebGL.setTexture(a,b)};Y.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()};Y.prototype._$Ds=function(a){this.drawParamWebGL._$Ds(a)};Y.prototype.getDrawParam=function(){return this.drawParamWebGL};Y.prototype.setMatrix=function(a){this.drawParamWebGL.setMatrix(a)};Y.prototype.setPremultipliedAlpha=function(a){this.drawParamWebGL.setPremultipliedAlpha(a)};Y.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()};Y.prototype.setAnisotropy=function(a){this.drawParamWebGL.setAnisotropy(a)};Y.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};Ea.prototype._$tb=function(){return this.motions};Ea.prototype.startMotion=function(a,b){for(var c=null,g=this.motions.length,f=0;f<g;++f)null!=(c=this.motions[f])&&(c._$qS(c._$w0.getFadeOut()),this._$eb&&d._$Ji("MotionQueueManager[size:%2d]-\x3estartMotion() / start _$K _$3 (m%d)\n",g,c._$sr));if(null==a)return-1;c=new Ja;c._$w0=a;this.motions.push(c);c=c._$sr;return this._$eb&&d._$Ji("MotionQueueManager[size:%2d]-\x3estartMotion() / new _$w0 (m%d)\n",g,c),c};Ea.prototype.updateParam=function(a){try{for(var b=!1,c=0;c<this.motions.length;c++){var g=this.motions[c];if(null!=g){var f=g._$w0;null!=f?(f.updateParam(a,g),b=!0,g.isFinished()&&(this._$eb&&d._$Ji("MotionQueueManager[size:%2d]-\x3eupdateParam() / _$T0 _$w0 (m%d)\n",this.motions.length-1,g._$sr),this.motions.splice(c,1),c--)):(this.motions=this.motions.splice(c,1),c--)}else this.motions.splice(c,1),c--}return b}catch(v){return d._$li(v),!0}};Ea.prototype.isFinished=function(a){if(1<=arguments.length){for(var b=0;b<this.motions.length;b++){var c=this.motions[b];if(null!=c&&c._$sr==a&&!c.isFinished())return!1}return!0}for(b=0;b<this.motions.length;b++)if(c=this.motions[b],null!=c)if(null!=c._$w0){if(!c.isFinished())return!1}else this.motions.splice(b,1),b--;else this.motions.splice(b,1),b--;return!0};Ea.prototype.stopAllMotions=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];null!=b&&b._$w0;this.motions.splice(a,1);a--}};Ea.prototype._$Zr=function(a){this._$eb=a};Ea.prototype._$e=function(){console.log("-- _$R --\n");for(var a=0;a<this.motions.length;a++)console.log("MotionQueueEnt[%d] :: %s\n",this.motions.length,this.motions[a]._$w0.toString())};Ja._$Gs=0;Ja.prototype.isFinished=function(){return this._$9L};Ja.prototype._$qS=function(a){a=B.getUserTimeMSec()+a;(0>this._$Do||a<this._$Do)&&(this._$Do=a)};Ja.prototype._$Bs=function(){return this._$sr};ra.prototype.setContext=function(a){var b=this.m;a.transform(b[0],b[1],b[3],b[4],b[6],b[7])};ra.prototype.toString=function(){for(var a="LDTransform { ",b=0;9>b;b++)a+=this.m[b].toFixed(2)+" ,";return a+" }"};ra.prototype.identity=function(){var a=this.m;a[0]=a[4]=a[8]=1;a[1]=a[2]=a[3]=a[5]=a[6]=a[7]=0};ra.prototype._$PS=function(a,b,c){null==c&&(c=[0,0]);var d=this.m;return c[0]=d[0]*a+d[3]*b+d[6],c[1]=d[1]*a+d[4]*b+d[7],c};ra.prototype._$P2=function(a){a||(a=new ra);var b=this.m,c=b[0],d=b[1],f=b[2],e=b[3],h=b[4],k=b[5],l=b[6],q=b[7],b=b[8],p=c*h*b+d*k*l+f*e*q-c*k*q-f*h*l-d*e*b;if(0==p)return null;p=1/p;return a.m[0]=p*(h*b-q*k),a.m[1]=p*(q*f-d*b),a.m[2]=p*(d*k-h*f),a.m[3]=p*(l*k-e*b),a.m[4]=p*(c*b-l*f),a.m[5]=p*(e*f-c*k),a.m[6]=p*(e*q-l*h),a.m[7]=p*(l*d-c*q),a.m[8]=p*(c*h-e*d),a};ra.prototype.transform=function(a,b,c){null==c&&(c=[0,0]);var d=this.m;return c[0]=d[0]*a+d[3]*b+d[6],c[1]=d[1]*a+d[4]*b+d[7],c};ra.prototype.translate=function(a,b){var c=this.m;c[6]=c[0]*a+c[3]*b+c[6];c[7]=c[1]*a+c[4]*b+c[7];c[8]=c[2]*a+c[5]*b+c[8]};ra.prototype.scale=function(a,b){var c=this.m;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b};ra.prototype.shear=function(a,b){var c=this.m,d=c[0]+c[3]*b,e=c[1]+c[4]*b,h=c[2]+c[5]*b;c[3]=c[0]*a+c[3];c[4]=c[1]*a+c[4];c[5]=c[2]*a+c[5];c[0]=d;c[1]=e;c[2]=h};ra.prototype.rotate=function(a){var b=this.m,c=Math.cos(a);a=Math.sin(a);var d=b[0]*c+b[3]*a,e=b[1]*c+b[4]*a,h=b[2]*c+b[5]*a;b[3]=-b[0]*a+b[3]*c;b[4]=-b[1]*a+b[4]*c;b[5]=-b[2]*a+b[5]*c;b[0]=d;b[1]=e;b[2]=h};ra.prototype.concatenate=function(a){var b=this.m;a=a.m;var c=b[1]*a[0]+b[4]*a[1]+b[7]*a[2],d=b[2]*a[0]+b[5]*a[1]+b[8]*a[2],e=b[0]*a[3]+b[3]*a[4]+b[6]*a[5],h=b[1]*a[3]+b[4]*a[4]+b[7]*a[5],k=b[2]*a[3]+b[5]*a[4]+b[8]*a[5],l=b[0]*a[6]+b[3]*a[7]+b[6]*a[8],q=b[1]*a[6]+b[4]*a[7]+b[7]*a[8],p=b[2]*a[6]+b[5]*a[7]+b[8]*a[8];m[0]=b[0]*a[0]+b[3]*a[1]+b[6]*a[2];m[1]=c;m[2]=d;m[3]=e;m[4]=h;m[5]=k;m[6]=l;m[7]=q;m[8]=p};aa.prototype=new Da;aa._$eT=null;aa._$tP={};aa._$2o=function(){return null==aa._$eT&&(aa._$eT=aa.getID("DST_BASE")),aa._$eT};aa._$27=function(){aa._$tP.clear();aa._$eT=null};aa.getID=function(a){var b=aa._$tP[a];return null==b&&(b=new aa(a),aa._$tP[a]=b),b};aa.prototype._$3s=function(){return new aa};X.prototype=new P;X._$9r=function(a){return new Float32Array(a)};X._$vb=function(a){return new Int16Array(a)};X._$cr=function(a,b){return null==a||a._$yL()<b.length?(a=X._$9r(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};X._$mb=function(a,b){return null==a||a._$yL()<b.length?(a=X._$vb(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};X._$Hs=function(){return this._$Gr};X._$as=function(a){this._$Gr=a};X.prototype.getGL=function(){return this.gl};X.prototype.setGL=function(a){this.gl=a};X.prototype.setTransform=function(a){this.transform=a};X.prototype._$ZT=function(){var a=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=a.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)));a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.DEPTH_TEST);a.frontFace(a.CW);a.enable(a.BLEND);a.colorMask(1,1,1,1);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)};X.prototype._$Uo=function(a,b,c,d,e,h,k,l){if(!(.01>h&&null==this.clipBufPre_clipContextMask)){b=(.9<h&&u.EXPAND_W,this.gl);if(null==this.gl)throw Error("gl is null");l=1*this._$C0*h;var f=1*this._$tT*h,g=1*this._$WL*h;h*=this._$lT;null!=this.clipBufPre_clipContextMask?(b.frontFace(b.CCW),b.useProgram(this.shaderProgram),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc),b.vertexAttribPointer(this.a_position_Loc,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,e),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc,1),b.enableVertexAttribArray(this.a_texCoord_Loc),b.vertexAttribPointer(this.a_texCoord_Loc,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask),a=this.getClipBufPre_clipContextMask().layoutChannelNo,a=this.getChannelFlagAsColor(a),b.uniform4f(this.u_channelFlag,a.r,a.g,a.b,a.a),a=this.getClipBufPre_clipContextMask().layoutBounds,b.uniform4f(this.u_baseColor_Loc,2*a.x-1,2*a.y-1,2*a._$EL()-1,2*a._$5T()-1),b.uniform1i(this.u_maskFlag_Loc,!0)):null!=this.getClipBufPre_clipContextDraw()?(b.useProgram(this.shaderProgramOff),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc_Off),b.vertexAttribPointer(this.a_position_Loc_Off,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,e),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc_Off,1),b.enableVertexAttribArray(this.a_texCoord_Loc_Off),b.vertexAttribPointer(this.a_texCoord_Loc_Off,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),b.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),b.activeTexture(b.TEXTURE2),b.bindTexture(b.TEXTURE_2D,u.fTexture[this.glno]),b.uniform1i(this.s_texture1_Loc_Off,2),a=this.getClipBufPre_clipContextDraw().layoutChannelNo,a=this.getChannelFlagAsColor(a),b.uniform4f(this.u_channelFlag_Loc_Off,a.r,a.g,a.b,a.a),b.uniform4f(this.u_baseColor_Loc_Off,l,f,g,h)):(b.useProgram(this.shaderProgram),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc),b.vertexAttribPointer(this.a_position_Loc,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,e),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc,1),b.enableVertexAttribArray(this.a_texCoord_Loc),b.vertexAttribPointer(this.a_texCoord_Loc,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),b.uniform4f(this.u_baseColor_Loc,l,f,g,h),b.uniform1i(this.u_maskFlag_Loc,!1));this.culling?this.gl.enable(b.CULL_FACE):this.gl.disable(b.CULL_FACE);this.gl.enable(b.BLEND);var n,q,p,r;if(null!=this.clipBufPre_clipContextMask)n=b.ONE,q=b.ONE_MINUS_SRC_ALPHA,p=b.ONE,r=b.ONE_MINUS_SRC_ALPHA;else switch(k){case R._$ms:n=b.ONE;q=b.ONE_MINUS_SRC_ALPHA;p=b.ONE;r=b.ONE_MINUS_SRC_ALPHA;break;case R._$ns:q=n=b.ONE;p=b.ZERO;r=b.ONE;break;case R._$_s:n=b.DST_COLOR,q=b.ONE_MINUS_SRC_ALPHA,p=b.ZERO,r=b.ONE}b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD);b.blendFuncSeparate(n,q,p,r);this.anisotropyExt&&b.texParameteri(b.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);b.drawElements(b.TRIANGLES,c.length,b.UNSIGNED_SHORT,0);b.bindTexture(b.TEXTURE_2D,null)}};X.prototype._$Rs=function(){throw Error("_$Rs");};X.prototype._$Ds=function(a){throw Error("_$Ds");};X.prototype._$K2=function(){for(var a=0;a<this.textures.length;a++)0!=this.textures[a]&&(this.gl._$K2(1,this.textures,a),this.textures[a]=null)};X.prototype.setTexture=function(a,b){this.textures[a]=b};X.prototype.initShader=function(){var a=this.gl;this.loadShaders2();this.a_position_Loc=a.getAttribLocation(this.shaderProgram,"a_position");this.a_texCoord_Loc=a.getAttribLocation(this.shaderProgram,"a_texCoord");this.u_matrix_Loc=a.getUniformLocation(this.shaderProgram,"u_mvpMatrix");this.s_texture0_Loc=a.getUniformLocation(this.shaderProgram,"s_texture0");this.u_channelFlag=a.getUniformLocation(this.shaderProgram,"u_channelFlag");this.u_baseColor_Loc=a.getUniformLocation(this.shaderProgram,"u_baseColor");this.u_maskFlag_Loc=a.getUniformLocation(this.shaderProgram,"u_maskFlag");this.a_position_Loc_Off=a.getAttribLocation(this.shaderProgramOff,"a_position");this.a_texCoord_Loc_Off=a.getAttribLocation(this.shaderProgramOff,"a_texCoord");this.u_matrix_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix");this.u_clipMatrix_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix");this.s_texture0_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"s_texture0");this.s_texture1_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"s_texture1");this.u_channelFlag_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_channelFlag");this.u_baseColor_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_baseColor")};X.prototype.disposeShader=function(){var a=this.gl;this.shaderProgram&&(a.deleteProgram(this.shaderProgram),this.shaderProgram=null);this.shaderProgramOff&&(a.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)};X.prototype.compileShader=function(a,b){var c=this.gl,e=c.createShader(a);if(null==e)return d._$Ji("_$L0 to create shader"),null;if(c.shaderSource(e,b),c.compileShader(e),!c.getShaderParameter(e,c.COMPILE_STATUS)){var f=c.getShaderInfoLog(e);return d._$Ji("_$L0 to compile shader : "+f),c.deleteShader(e),null}return e};X.prototype.loadShaders2=function(){var a=this.gl;if((this.shaderProgram=a.createProgram(),!this.shaderProgram)||(this.shaderProgramOff=a.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(a.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position \x3d u_mvpMatrix * a_position;    v_ClipPos \x3d u_mvpMatrix * a_position;    v_texCoord \x3d a_texCoord;}"),!this.vertShader)return d._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(a.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position \x3d u_mvpMatrix * a_position;    v_ClipPos \x3d u_ClipMatrix * a_position;    v_texCoord \x3d a_texCoord ;}"),!this.vertShaderOff)return d._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(a.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside \x3d             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor \x3d u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor \x3d texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor \x3d smpColor;}"),!this.fragShader)return d._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(a.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask \x3d texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask \x3d texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal \x3d clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask \x3d col_formask * maskVal;    gl_FragColor \x3d col_formask;}"),!this.fragShaderOff)return d._$Ji("OffFragment shader compile _$li!"),!1;if(a.attachShader(this.shaderProgram,this.vertShader),a.attachShader(this.shaderProgram,this.fragShader),a.attachShader(this.shaderProgramOff,this.vertShaderOff),a.attachShader(this.shaderProgramOff,this.fragShaderOff),a.linkProgram(this.shaderProgram),a.linkProgram(this.shaderProgramOff),!a.getProgramParameter(this.shaderProgram,a.LINK_STATUS)){var b=a.getProgramInfoLog(this.shaderProgram);return d._$Ji("_$L0 to link program: "+b),this.vertShader&&(a.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(a.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(a.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(a.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(a.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(a.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0};X.prototype.createFramebuffer=function(){var a=this.gl,b=u.clippingMaskBufferSize,c=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,c);var d=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,d);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,b,b);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,d);var e=a.createTexture();return a.bindTexture(a.TEXTURE_2D,e),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,b,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),a.bindTexture(a.TEXTURE_2D,null),a.bindRenderbuffer(a.RENDERBUFFER,null),a.bindFramebuffer(a.FRAMEBUFFER,null),u.fTexture[this.glno]=e,{framebuffer:c,renderbuffer:d,texture:u.fTexture[this.glno]}};ja.prototype._$fP=function(){var a,b,c,d=this._$ST();if(0==(128&d))return 255&d;if(0==(128&(a=this._$ST())))return(127&d)<<7|127&a;if(0==(128&(b=this._$ST())))return(127&d)<<14|(127&a)<<7|255&b;if(0==(128&(c=this._$ST())))return(127&d)<<21|(127&a)<<14|(127&b)<<7|255&c;throw new Ca("_$L _$0P  _");};ja.prototype.getFormatVersion=function(){return this._$S2};ja.prototype._$gr=function(a){this._$S2=a};ja.prototype._$3L=function(){return this._$fP()};ja.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)};ja.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)};ja.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)};ja.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)};ja.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)};ja.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new Ca("_$L _$q read long");};ja.prototype._$po=function(){return this._$zT(),0!=this._$T.getInt8(this._$F++)};var Ya=!0;ja.prototype._$bT=function(){this._$zT();var a=this._$3L(),b=null;if(Ya)try{for(var c=new ArrayBuffer(2*a),b=new Uint16Array(c),d=0;d<a;++d)b[d]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,b)}catch(f){Ya=!1}try{c=[];if(null==b)for(d=0;d<a;++d)c[d]=this._$T.getUint8(this._$F++);else for(d=0;d<a;++d)c[d]=b[d];return String.fromCharCode.apply(null,c)}catch(f){console.log("read utf8 / _$rT _$L0 !! : "+f)}};ja.prototype._$cS=function(){this._$zT();for(var a=this._$3L(),b=new Int32Array(a),c=0;c<a;c++)b[c]=this._$T.getInt32(this._$F),this._$F+=4;return b};ja.prototype._$Tb=function(){this._$zT();for(var a=this._$3L(),b=new Float32Array(a),c=0;c<a;c++)b[c]=this._$T.getFloat32(this._$F),this._$F+=4;return b};ja.prototype._$5b=function(){this._$zT();for(var a=this._$3L(),b=new Float64Array(a),c=0;c<a;c++)b[c]=this._$T.getFloat64(this._$F),this._$F+=8;return b};ja.prototype._$nP=function(){return this._$Jb(-1)};ja.prototype._$Jb=function(a){if(this._$zT(),0>a&&(a=this._$3L()),a==Z._$7P){a=this._$6L();if(0<=a&&a<this._$Ko.length)return this._$Ko[a];throw new Ca("_$sL _$4i @_$m0");}a=this._$4b(a);return this._$Ko.push(a),a};ja.prototype._$4b=function(a){if(0==a)return null;if(50==a)return a=this._$bT(),a=sa.getID(a);if(51==a)return a=this._$bT(),a=aa.getID(a);if(134==a)return a=this._$bT(),a=I.getID(a);if(60==a)return a=this._$bT(),a=A.getID(a);if(48<=a)return a=Z._$9o(a),null!=a?(a._$F0(this),a):null;switch(a){case 1:return this._$bT();case 10:return new D(this._$6L(),!0);case 11:return new ea(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new ea(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new pa(this._$mP(),this._$mP());case 14:return new pa(this._$_T(),this._$_T());case 15:var b=this._$3L();a=Array(b);for(var c=0;c<b;c++)a[c]=this._$nP();return a;case 17:return a=new z(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new q(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Sa(this._$6L(),this._$6L());case 23:throw Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new Ca("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+a);default:throw new Ca("_$6 _$q : _$nP() NO _$i : "+a);}};ja.prototype._$8L=function(){return 0==this._$hL?this._$v0=this._$ST():8==this._$hL&&(this._$v0=this._$ST(),this._$hL=0),1==(this._$v0>>7-this._$hL++&1)};ja.prototype._$zT=function(){0!=this._$hL&&(this._$hL=0)};da._$2S=Math.PI/180;da._$bS=Math.PI/180;da._$wS=180/Math.PI;da._$NS=180/Math.PI;da.PI_F=Math.PI;da._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1];da._$92=function(a,b){return da._$tS(Math.atan2(a[1],a[0]),Math.atan2(b[1],b[0]))};da._$tS=function(a,b){for(var c=a-b;c<-Math.PI;)c+=2*Math.PI;for(;c>Math.PI;)c-=2*Math.PI;return c};da._$9=function(a){return Math.sin(a)};da.fcos=function(a){return Math.cos(a)};Ma.prototype._$u2=function(){return this._$IS[0]};Ma.prototype._$yo=function(){return this._$AT&&!this._$IS[0]};Ma.prototype._$GT=function(){return this._$e0};V._$W2=0;V.SYSTEM_INFO=null;V.USER_AGENT=navigator.userAgent;V.isIPhone=function(){return V.SYSTEM_INFO||V.setup(),V.SYSTEM_INFO._isIPhone};V.isIOS=function(){return V.SYSTEM_INFO||V.setup(),V.SYSTEM_INFO._isIPhone||V.SYSTEM_INFO._isIPad};V.isAndroid=function(){return V.SYSTEM_INFO||V.setup(),V.SYSTEM_INFO._isAndroid};V.getOSVersion=function(){return V.SYSTEM_INFO||V.setup(),V.SYSTEM_INFO.version};V.getOS=function(){return V.SYSTEM_INFO||V.setup(),V.SYSTEM_INFO._isIPhone||V.SYSTEM_INFO._isIPad?"iOS":V.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"};V.setup=function(){function a(a,b){for(var c=a.substring(b).split(/[ _,;\.]/),e=0,f=0;2>=f&&!isNaN(c[f]);f++){var g=parseInt(c[f]);if(0>g||999<g){d._$li("err : "+g+" @UtHtml5.setup()");e=0;break}e+=g*Math.pow(1E3,2-f)}return e}var b,c=V.USER_AGENT,e=V.SYSTEM_INFO={userAgent:c};if(0<=(b=c.indexOf("iPhone OS ")))e.os="iPhone",e._isIPhone=!0,e.version=a(c,b+10);else if(0<=(b=c.indexOf("iPad"))){if(0>(b=c.indexOf("CPU OS")))return void d._$li(" err : "+c+" @UtHtml5.setup()");e.os="iPad";e._isIPad=!0;e.version=a(c,b+7)}else 0<=(b=c.indexOf("Android"))?(e.os="Android",e._isAndroid=!0,e.version=a(c,b+8)):(e.os="-",e.version=-1)};window.UtSystem=B;window.UtDebug=d;window.LDTransform=ra;window.LDGL=fa;window.Live2D=u;window.Live2DModelWebGL=Y;window.Live2DModelJS=ma;window.Live2DMotion=W;window.MotionQueueManager=Ea;window.PhysicsHair=x;window.AMotion=h;window.PartsDataID=I;window.DrawDataID=sa;window.BaseDataID=aa;window.ParamID=A;u.init();y=!1}()}).call(J,N(7))},function(S,J){S.exports={"import":function(){throw Error("System.import cannot be used indirectly");}}},function(S,J,N){function p(e){return e&&e.__esModule?e:{"default":e}}function e(){this.models=[];this.count=-1;this.reloadFlg=!1;Live2D.init();l.Live2DFramework.setPlatformManager(new ba["default"])}Object.defineProperty(J,"__esModule",{value:!0});J["default"]=e;var l=N(0);S=N(9);var ba=p(S);S=N(10);var r=p(S);N=N(1);var D=p(N);e.prototype.createModel=function(){var e=new r["default"];return this.models.push(e),e};e.prototype.changeModel=function(e,d){this.reloadFlg&&(this.reloadFlg=!1,this.releaseModel(0,e),this.createModel(),this.models[0].load(e,d))};e.prototype.getModel=function(e){return e>=this.models.length?null:this.models[e]};e.prototype.releaseModel=function(e,d){this.models.length<=e||(this.models[e].release(d),delete this.models[e],this.models.splice(e,1))};e.prototype.numModels=function(){return this.models.length};e.prototype.setDrag=function(e,d){for(var h=0;h<this.models.length;h++)this.models[h].setDrag(e,d)};e.prototype.maxScaleEvent=function(){D["default"].DEBUG_LOG&&console.log("Max scale event.");for(var e=0;e<this.models.length;e++)this.models[e].startRandomMotion(D["default"].MOTION_GROUP_PINCH_IN,D["default"].PRIORITY_NORMAL)};e.prototype.minScaleEvent=function(){D["default"].DEBUG_LOG&&console.log("Min scale event.");for(var e=0;e<this.models.length;e++)this.models[e].startRandomMotion(D["default"].MOTION_GROUP_PINCH_OUT,D["default"].PRIORITY_NORMAL)};e.prototype.tapEvent=function(e,d){D["default"].DEBUG_LOG&&console.log("tapEvent view x:"+e+" y:"+d);for(var h=0;h<this.models.length;h++)this.models[h].hitTest(D["default"].HIT_AREA_HEAD,e,d)?(D["default"].DEBUG_LOG&&console.log("Tap face."),this.models[h].setRandomExpression()):this.models[h].hitTest(D["default"].HIT_AREA_BODY,e,d)?(D["default"].DEBUG_LOG&&console.log("Tap body. models["+h+"]"),this.models[h].startRandomMotion(D["default"].MOTION_GROUP_TAP_BODY,D["default"].PRIORITY_NORMAL)):this.models[h].hitTestCustom("head",e,d)?(D["default"].DEBUG_LOG&&console.log("Tap face."),this.models[h].startRandomMotion(D["default"].MOTION_GROUP_FLICK_HEAD,D["default"].PRIORITY_NORMAL)):this.models[h].hitTestCustom("body",e,d)&&(D["default"].DEBUG_LOG&&console.log("Tap body. models["+h+"]"),this.models[h].startRandomMotion(D["default"].MOTION_GROUP_TAP_BODY,D["default"].PRIORITY_NORMAL));return!0}},function(S,J,N){function p(){}Object.defineProperty(J,"__esModule",{value:!0});J["default"]=p;var e=N(2);p.prototype.loadBytes=function(e,p){var l=new XMLHttpRequest;l.open("GET",e,!0);l.responseType="arraybuffer";l.onload=function(){switch(l.status){case 200:p(l.response);break;default:console.error("Failed to load ("+l.status+") : "+e)}};l.send(null)};p.prototype.loadString=function(e){this.loadBytes(e,function(e){return e})};p.prototype.loadLive2DModel=function(e,p){var l=null;this.loadBytes(e,function(e){l=Live2DModelWebGL.loadModel(e);p(l)})};p.prototype.loadTexture=function(l,p,r,D){var h=new Image;h.crossOrigin="Anonymous";h.src=r;h.onload=function(){var d=(0,e.getContext)(),r=d.createTexture();if(!r)return console.error("Failed to generate gl texture name."),-1;0==l.isPremultipliedAlpha()&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);d.activeTexture(d.TEXTURE0);d.bindTexture(d.TEXTURE_2D,r);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,h);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST);d.generateMipmap(d.TEXTURE_2D);l.setTexture(p,r);"function"==typeof D&&D()};h.onerror=function(){console.error("Failed to load image : "+r)}};p.prototype.jsonParseFromBytes=function(e){var l,p=new Uint8Array(e,0,3);return l=239==p[0]&&187==p[1]&&191==p[2]?String.fromCharCode.apply(null,new Uint8Array(e,3)):String.fromCharCode.apply(null,new Uint8Array(e)),JSON.parse(l)};p.prototype.log=function(e){}},function(S,J,N){function p(e){return e&&e.__esModule?e:{"default":e}}function e(){l.L2DBaseModel.prototype.constructor.call(this);this.modelHomeDir="";this.modelSetting=null;this.tmpMatrix=[]}Object.defineProperty(J,"__esModule",{value:!0});J["default"]=e;var l=N(0);S=N(11);var ba=p(S);S=N(1);var r=p(S);N=N(3);var D=p(N);e.prototype=new l.L2DBaseModel;e.prototype.load=function(e,d,l){this.setUpdating(!0);this.setInitialized(!1);this.modelHomeDir=d.substring(0,d.lastIndexOf("/")+1);this.modelSetting=new ba["default"];var h=this;this.modelSetting.loadModelSetting(d,function(){var d=h.modelHomeDir+h.modelSetting.getModelFile();h.loadModelData(d,function(d){for(d=0;d<h.modelSetting.getTextureNum();d++){var e=/^https?:\/\/|^\/\//i.test(h.modelSetting.getTextureFile(d))?h.modelSetting.getTextureFile(d):h.modelHomeDir+h.modelSetting.getTextureFile(d);h.loadTexture(d,e,function(){if(h.isTexLoaded){if(0<h.modelSetting.getExpressionNum()){h.expressions={};for(var d=0;d<h.modelSetting.getExpressionNum();d++){var e=h.modelSetting.getExpressionName(d),k=h.modelHomeDir+h.modelSetting.getExpressionFile(d);h.loadExpression(e,k)}}else h.expressionManager=null,h.expressions={};if(h.eyeBlink,null!=h.modelSetting.getPhysicsFile()?h.loadPhysics(h.modelHomeDir+h.modelSetting.getPhysicsFile()):h.physics=null,null!=h.modelSetting.getPoseFile()?h.loadPose(h.modelHomeDir+h.modelSetting.getPoseFile(),function(){h.pose.updateParam(h.live2DModel)}):h.pose=null,null!=h.modelSetting.getLayout())d=h.modelSetting.getLayout(),null!=d.width&&h.modelMatrix.setWidth(d.width),null!=d.height&&h.modelMatrix.setHeight(d.height),null!=d.x&&h.modelMatrix.setX(d.x),null!=d.y&&h.modelMatrix.setY(d.y),null!=d.center_x&&h.modelMatrix.centerX(d.center_x),null!=d.center_y&&h.modelMatrix.centerY(d.center_y),null!=d.top&&h.modelMatrix.top(d.top),null!=d.bottom&&h.modelMatrix.bottom(d.bottom),null!=d.left&&h.modelMatrix.left(d.left),null!=d.right&&h.modelMatrix.right(d.right);null!=h.modelSetting.getHitAreasCustom()&&(d=h.modelSetting.getHitAreasCustom(),null!=d.head_x&&(r["default"].hit_areas_custom_head_x=d.head_x),null!=d.head_y&&(r["default"].hit_areas_custom_head_y=d.head_y),null!=d.body_x&&(r["default"].hit_areas_custom_body_x=d.body_x),null!=d.body_y&&(r["default"].hit_areas_custom_body_y=d.body_y));for(d=0;d<h.modelSetting.getInitParamNum();d++)h.live2DModel.setParamFloat(h.modelSetting.getInitParamID(d),h.modelSetting.getInitParamValue(d));for(d=0;d<h.modelSetting.getInitPartsVisibleNum();d++)h.live2DModel.setPartsOpacity(h.modelSetting.getInitPartsVisibleID(d),h.modelSetting.getInitPartsVisibleValue(d));h.live2DModel.saveParam();h.preloadMotionGroup(r["default"].MOTION_GROUP_IDLE);h.preloadMotionGroup(r["default"].MOTION_GROUP_SLEEPY);h.mainMotionManager.stopAllMotions();h.setUpdating(!1);h.setInitialized(!0);"function"==typeof l&&l()}})}})})};e.prototype.release=function(e){var d=l.Live2DFramework.getPlatformManager();e.deleteTexture(d.texture)};e.prototype.preloadMotionGroup=function(e){for(var d=this,h=0;h<this.modelSetting.getMotionNum(e);h++){var l=this.modelSetting.getMotionFile(e,h);this.loadMotion(l,this.modelHomeDir+l,function(l){l.setFadeIn(d.modelSetting.getMotionFadeIn(e,h));l.setFadeOut(d.modelSetting.getMotionFadeOut(e,h))})}};e.prototype.update=function(){if(null==this.live2DModel)return void(r["default"].DEBUG_LOG&&console.error("Failed to update."));var e=2*((UtSystem.getUserTimeMSec()-this.startTimeMSec)/1E3)*Math.PI;this.mainMotionManager.isFinished()&&("1"===sessionStorage.getItem("Sleepy")?this.startRandomMotion(r["default"].MOTION_GROUP_SLEEPY,r["default"].PRIORITY_SLEEPY):this.startRandomMotion(r["default"].MOTION_GROUP_IDLE,r["default"].PRIORITY_IDLE));this.live2DModel.loadParam();this.mainMotionManager.updateParam(this.live2DModel)||null!=this.eyeBlink&&this.eyeBlink.updateParam(this.live2DModel);this.live2DModel.saveParam();null==this.expressionManager||null==this.expressions||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel);this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1);this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1);this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1);this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(e/6.5345)),.5);this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(e/3.5345)),.5);this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(e/5.5345)),.5);this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(e/15.5345)),.5);this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(e/3.2345)),1);null!=this.physics&&this.physics.updateParam(this.live2DModel);null==this.lipSync&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue);null!=this.pose&&this.pose.updateParam(this.live2DModel);this.live2DModel.update()};e.prototype.setRandomExpression=function(){var e=[],d;for(d in this.expressions)e.push(d);d=parseInt(Math.random()*e.length);this.setExpression(e[d])};e.prototype.startRandomMotion=function(e,d){var h=this.modelSetting.getMotionNum(e),h=parseInt(Math.random()*h);this.startMotion(e,h,d)};e.prototype.startMotion=function(e,d,l){var h=this.modelSetting.getMotionFile(e,d);if(null==h||""==h)return void(r["default"].DEBUG_LOG&&console.error("Failed to motion."));if(l==r["default"].PRIORITY_FORCE)this.mainMotionManager.setReservePriority(l);else if(!this.mainMotionManager.reserveMotion(l))return void(r["default"].DEBUG_LOG&&console.log("Motion is running."));var p,A=this;null==this.motions[e]?this.loadMotion(null,this.modelHomeDir+h,function(h){p=h;A.setFadeInFadeOut(e,d,l,p)}):(p=this.motions[e],A.setFadeInFadeOut(e,d,l,p))};e.prototype.setFadeInFadeOut=function(e,d,l,p){var h=this.modelSetting.getMotionFile(e,d);if(p.setFadeIn(this.modelSetting.getMotionFadeIn(e,d)),p.setFadeOut(this.modelSetting.getMotionFadeOut(e,d)),r["default"].DEBUG_LOG&&console.log("Start motion : "+h),null!=this.modelSetting.getMotionSound(e,d))e=this.modelSetting.getMotionSound(e,d),d=document.createElement("audio"),d.src=this.modelHomeDir+e,r["default"].DEBUG_LOG&&console.log("Start sound : "+e),d.play();this.mainMotionManager.startMotionPrio(p,l)};e.prototype.setExpression=function(e){var d=this.expressions[e];r["default"].DEBUG_LOG&&console.log("Expression : "+e);this.expressionManager.startMotion(d,!1)};e.prototype.draw=function(e){D["default"].push();D["default"].multMatrix(this.modelMatrix.getArray());this.tmpMatrix=D["default"].getMatrix();this.live2DModel.setMatrix(this.tmpMatrix);this.live2DModel.draw();D["default"].pop()};e.prototype.hitTest=function(e,d,l){for(var h=this.modelSetting.getHitAreaNum(),p=0;p<h;p++)if(e==this.modelSetting.getHitAreaName(p))return e=this.modelSetting.getHitAreaID(p),this.hitTestSimple(e,d,l);return!1};e.prototype.hitTestCustom=function(e,d,l){return"head"==e?this.hitTestSimpleCustom(r["default"].hit_areas_custom_head_x,r["default"].hit_areas_custom_head_y,d,l):"body"==e&&this.hitTestSimpleCustom(r["default"].hit_areas_custom_body_x,r["default"].hit_areas_custom_body_y,d,l)}},function(S,J,N){function p(){this.NAME="name";this.ID="id";this.MODEL="model";this.TEXTURES="textures";this.HIT_AREAS="hit_areas";this.PHYSICS="physics";this.POSE="pose";this.EXPRESSIONS="expressions";this.MOTION_GROUPS="motions";this.SOUND="sound";this.FADE_IN="fade_in";this.FADE_OUT="fade_out";this.LAYOUT="layout";this.HIT_AREAS_CUSTOM="hit_areas_custom";this.INIT_PARAM="init_param";this.INIT_PARTS_VISIBLE="init_parts_visible";this.VALUE="val";this.FILE="file";this.json={}}Object.defineProperty(J,"__esModule",{value:!0});J["default"]=p;var e=N(0);p.prototype.loadModelSetting=function(l,p){var r=this;e.Live2DFramework.getPlatformManager().loadBytes(l,function(e){e=String.fromCharCode.apply(null,new Uint8Array(e));r.json=JSON.parse(e);p()})};p.prototype.getTextureFile=function(e){return null==this.json[this.TEXTURES]||null==this.json[this.TEXTURES][e]?null:this.json[this.TEXTURES][e]};p.prototype.getModelFile=function(){return this.json[this.MODEL]};p.prototype.getTextureNum=function(){return null==this.json[this.TEXTURES]?0:this.json[this.TEXTURES].length};p.prototype.getHitAreaNum=function(){return null==this.json[this.HIT_AREAS]?0:this.json[this.HIT_AREAS].length};p.prototype.getHitAreaID=function(e){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][e]?null:this.json[this.HIT_AREAS][e][this.ID]};p.prototype.getHitAreaName=function(e){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][e]?null:this.json[this.HIT_AREAS][e][this.NAME]};p.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]};p.prototype.getPoseFile=function(){return this.json[this.POSE]};p.prototype.getExpressionNum=function(){return null==this.json[this.EXPRESSIONS]?0:this.json[this.EXPRESSIONS].length};p.prototype.getExpressionFile=function(e){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][e][this.FILE]};p.prototype.getExpressionName=function(e){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][e][this.NAME]};p.prototype.getLayout=function(){return this.json[this.LAYOUT]};p.prototype.getHitAreasCustom=function(){return this.json[this.HIT_AREAS_CUSTOM]};p.prototype.getInitParamNum=function(){return null==this.json[this.INIT_PARAM]?0:this.json[this.INIT_PARAM].length};p.prototype.getMotionNum=function(e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]?0:this.json[this.MOTION_GROUPS][e].length};p.prototype.getMotionFile=function(e,p){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][p]?null:this.json[this.MOTION_GROUPS][e][p][this.FILE]};p.prototype.getMotionSound=function(e,p){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][p]||null==this.json[this.MOTION_GROUPS][e][p][this.SOUND]?null:this.json[this.MOTION_GROUPS][e][p][this.SOUND]};p.prototype.getMotionFadeIn=function(e,p){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][p]||null==this.json[this.MOTION_GROUPS][e][p][this.FADE_IN]?1E3:this.json[this.MOTION_GROUPS][e][p][this.FADE_IN]};p.prototype.getMotionFadeOut=function(e,p){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][p]||null==this.json[this.MOTION_GROUPS][e][p][this.FADE_OUT]?1E3:this.json[this.MOTION_GROUPS][e][p][this.FADE_OUT]};p.prototype.getInitParamID=function(e){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][e]?null:this.json[this.INIT_PARAM][e][this.ID]};p.prototype.getInitParamValue=function(e){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][e]?NaN:this.json[this.INIT_PARAM][e][this.VALUE]};p.prototype.getInitPartsVisibleNum=function(){return null==this.json[this.INIT_PARTS_VISIBLE]?0:this.json[this.INIT_PARTS_VISIBLE].length};p.prototype.getInitPartsVisibleID=function(e){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][e]?null:this.json[this.INIT_PARTS_VISIBLE][e][this.ID]};p.prototype.getInitPartsVisibleValue=function(e){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][e]?NaN:this.json[this.INIT_PARTS_VISIBLE][e][this.VALUE]}}]);